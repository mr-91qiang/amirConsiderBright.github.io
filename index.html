<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>an9527@aliyun.com</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="keywords" content="basecommon.cn">
<meta property="og:type" content="website">
<meta property="og:title" content="an9527@aliyun.com">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="an9527@aliyun.com">
<meta property="og:locale" content="zh-tw">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="an9527@aliyun.com">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">an9527@aliyun.com</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">é„™äººé‚®ç®±æ¬¢è¿éªšæ‰°</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="spring-cloudä¸dubboçš„åŒºåˆ«è¯¦è§£" class="article article-type-spring" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/09/18/cloudä¸dubboçš„åŒºåˆ«è¯¦è§£/" class="article-date">
  <time datetime="2019-09-18T12:51:48.000Z" itemprop="datePublished">2019-09-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/09/18/cloudä¸dubboçš„åŒºåˆ«è¯¦è§£/">Springcloudä¸dubboçš„åŒºåˆ«è¯¦è§£</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>é¢è¯•é—®åˆ°çš„å…³äºspring cloudç†è§£å’Œspring cloudä¸dubboçš„åŒºåˆ«è¯¦è§£<br>ä»Šå¤©ä¸‹åˆé¢è¯•è¢«é—®åˆ°è¿™ä¸ªé—®é¢˜,å½“æ—¶æ²¡ç­”ä¸Šæ¥,æ¯•ç«Ÿä¹‹å‰å·¥ä½œä¹Ÿéƒ½åªæ˜¯ç®€å•çš„ä½¿ç”¨,å¹¶æ²¡æœ‰çœŸæ­£å»äº†è§£è¿‡ä¸¤ä¸ªä¹‹é—´çš„åŒºåˆ«<br>æ™šä¸Šè‡ªå·±æŸ¥äº†ä¸€äº›æ–‡æ¡£,æœ‰ç‚¹æ„Ÿæ‚Ÿåœ¨è¿™é‡Œå†™ä¸€ä¸‹<br>é¦–å…ˆä¸¤ä¸ªéƒ½æ˜¯å›½å†…æ¯”è¾ƒç«çš„å¾®æœåŠ¡æ¶æ„<br>å…ˆä»‹ç»ä¸€ä¸‹å¾®æœåŠ¡<br><strong>å¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ç§æ¶æ„æ¨¡å¼ï¼Œå®ƒå°†å•ä¸€åº”ç”¨ç¨‹åºåˆ’åˆ†æˆä¸€ç»„å°çš„æœåŠ¡ï¼ŒæœåŠ¡ä¹‹é—´äº’ç›¸é…åˆï¼Œè¾¾åˆ°æœ€ç»ˆçš„ç›®çš„</strong></p>
<p>ä¼˜ç‚¹æ˜¯å¯ä»¥å°†ç¹æ‚çš„ä»£ç å †åˆ†è§£,æ¯ä¸€ä¸ªå¾®æœåŠ¡å®ç°å•ä¸€çš„åŠŸèƒ½,å¹¶é€šè¿‡æ¥å£ä¸å…¶ä»–æœåŠ¡æ²Ÿé€šåˆä½œ<br>æ¯ä¸ªå¾®æœåŠ¡ä¹‹é—´ç›¸äº’ç‹¬ç«‹éƒ¨ç½²æŠ€æœ¯ä½¿ç”¨æ›´åŠ çµæ´»<br>è¿™é‡Œå…ˆä»‹ç»ä¸€ä¸‹æˆ‘æ¯”è¾ƒç†Ÿæ‚‰çš„spring cloud ,å®ƒåŸºäºSpring Bootå®ç°å„ç§åŠŸèƒ½</p>
<h3 id="æ ¸å¿ƒä¸ºä»¥ä¸‹äº”ä¸ª"><a href="#æ ¸å¿ƒä¸ºä»¥ä¸‹äº”ä¸ª" class="headerlink" title="æ ¸å¿ƒä¸ºä»¥ä¸‹äº”ä¸ª"></a>æ ¸å¿ƒä¸ºä»¥ä¸‹äº”ä¸ª</h3><h4 id="1-Eureka-æ³¨å†Œä¸­å¿ƒâ€”â€”Netflix-Eureka-åŠŸèƒ½ç±»ä¼¼äºdubboçš„æ³¨å†Œä¸­å¿ƒï¼Œæ¯”å¦‚zookeeperã€‚"><a href="#1-Eureka-æ³¨å†Œä¸­å¿ƒâ€”â€”Netflix-Eureka-åŠŸèƒ½ç±»ä¼¼äºdubboçš„æ³¨å†Œä¸­å¿ƒï¼Œæ¯”å¦‚zookeeperã€‚" class="headerlink" title="1.Eureka æ³¨å†Œä¸­å¿ƒâ€”â€”Netflix Eureka    åŠŸèƒ½ç±»ä¼¼äºdubboçš„æ³¨å†Œä¸­å¿ƒï¼Œæ¯”å¦‚zookeeperã€‚"></a>1.Eureka æ³¨å†Œä¸­å¿ƒâ€”â€”Netflix Eureka    åŠŸèƒ½ç±»ä¼¼äºdubboçš„æ³¨å†Œä¸­å¿ƒï¼Œæ¯”å¦‚zookeeperã€‚</h4><p>eurekaæ˜¯ä¸€ä¸ªåŸºäºRESTçš„æœåŠ¡ï¼Œç”¨äºå®šä½æœåŠ¡ï¼Œä»¥å®ç°äº‘ç«¯ä¸­é—´å±‚æœåŠ¡å‘ç°å’Œæ•…éšœè½¬ç§»ã€‚æœåŠ¡æ³¨å†Œä¸å‘ç°å¯¹äºå¾®æœåŠ¡æ¶æ„æ¥è¯´æ˜¯éå¸¸é‡è¦çš„ï¼Œæœ‰äº†æœåŠ¡å‘ç°å’Œæ³¨å†Œï¼Œåªéœ€è¦ä½¿ç”¨æœåŠ¡çš„æ ‡è¯†ç¬¦ï¼Œå°±å¯ä»¥è®¿é—®åˆ°æœåŠ¡ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹æœåŠ¡<br>Eureka serveræä¾›æœåŠ¡æ³¨å†Œå’Œå‘ç°.<br> Eureka Serveræä¾›æœåŠ¡æ³¨å†ŒæœåŠ¡ã€‚å„ä¸ªæœåŠ¡æä¾›è€…èŠ‚ç‚¹å¯åŠ¨åï¼Œä¼šåœ¨Eureka Serverä¸­è¿›è¡Œæ³¨å†Œï¼Œè¿™æ ·Eureka serverä¸­çš„æœåŠ¡å­˜å‚¨å¯ç”¨ä¿¡æ¯å¹¶ä¸”å¯ä»¥ç›´è§‚çš„çœ‹åˆ°.<br>Service ProvideræœåŠ¡æä¾›æ–¹å°†è‡ªèº«æœåŠ¡æ³¨å†Œåˆ°Eurekaï¼Œä»è€Œä½¿æœåŠ¡æ¶ˆè´¹æ–¹èƒ½å¤Ÿæ‰¾åˆ°ã€‚<br>Service ConsumeræœåŠ¡æ¶ˆè´¹æ–¹ä»Eurekaè·å–æ³¨å†ŒæœåŠ¡åˆ—è¡¨ï¼Œä»è€Œèƒ½å¤Ÿæ¶ˆè´¹æœåŠ¡ã€‚</p>
<h4 id="2-å®¢æœç«¯è´Ÿè½½å‡è¡¡â€”â€”Netflix-Ribbon-Feign"><a href="#2-å®¢æœç«¯è´Ÿè½½å‡è¡¡â€”â€”Netflix-Ribbon-Feign" class="headerlink" title="2.å®¢æœç«¯è´Ÿè½½å‡è¡¡â€”â€”Netflix Ribbon/Feign"></a>2.å®¢æœç«¯è´Ÿè½½å‡è¡¡â€”â€”Netflix Ribbon/Feign</h4><p>ä¸ºäº†æä¾›å¹¶å‘é‡ï¼Œæœ‰æ—¶åŒä¸€ä¸ªæœåŠ¡æä¾›è€…å¯ä»¥éƒ¨ç½²å¤šä¸ªã€‚è¿™ä¸ªå®¢æˆ·ç«¯åœ¨è°ƒç”¨æ—¶è¦æ ¹æ®ä¸€å®šçš„è´Ÿè´£å‡è¡¡ç­–ç•¥å®Œæˆè´Ÿè½½è°ƒç”¨ã€‚<br>Ribbonæ˜¯Netflixå‘å¸ƒçš„äº‘ä¸­é—´å±‚æœåŠ¡å¼€æºé¡¹ç›®ï¼Œä¸»è¦åŠŸèƒ½æ˜¯æä¾›å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ç®—æ³•ã€‚Ribbonå®¢æˆ·ç«¯ç»„ä»¶æä¾›ä¸€ç³»åˆ—å®Œå–„çš„é…ç½®é¡¹ï¼Œå¦‚ï¼Œè¿æ¥è¶…æ—¶ï¼Œé‡è¯•ç­‰ã€‚<br> æ¯”å¦‚ä»Šå¤©é¢è¯•å°±é—®åˆ°äº†è¿æ¥è¶…æ—¶æ—¶é—´<br> è´Ÿè½½å‡è¡¡ç®—æ³•æœ€å¸¸ç”¨çš„æœ‰éšæœºRandomRuleå’Œè½®è¯¢RoundRobinRuleä¸¤ç§<br> ä»£ç ç½‘ä¸Šæœ‰å¾ˆå¤šå°±ä¸ä¸€ä¸€åˆ—å‡º<br> Feignæ˜¯ä¸€ä¸ªå£°æ˜å¼çš„Web Serviceå®¢æˆ·ç«¯ï¼Œå®ƒçš„ç›®çš„å°±æ˜¯è®©Web Serviceè°ƒç”¨æ›´åŠ ç®€å•,ç›¸å½“äºåœ¨Ribbonçš„åŸºç¡€ä¸Šç»§ç»­å°è£…äº†ä¸€å±‚,ç±»ä¼¼äºspringmvcåœ¨servletçš„åŸºç¡€ä¸Šåšäº†ä¸€å±‚å°è£…<br> å®ƒ æä¾›äº†HTTPè¯·æ±‚çš„æ¨¡æ¿ï¼Œé€šè¿‡ç¼–å†™ç®€å•çš„æ¥å£å’Œæ’å…¥æ³¨è§£ï¼Œå°±å¯ä»¥å®šä¹‰å¥½HTTPè¯·æ±‚çš„å‚æ•°ã€æ ¼å¼ã€åœ°å€ç­‰ä¿¡æ¯ã€‚ä¼šå®Œå…¨ä»£ç†HTTPè¯·æ±‚ï¼Œ<br> å¯æ’æ‹”çš„æ³¨è§£æ”¯æŒï¼ŒåŒ…æ‹¬Feignæ³¨è§£å’ŒJAX-RSæ³¨è§£;<br>æ”¯æŒå¯æ’æ‹”çš„HTTPç¼–ç å™¨å’Œè§£ç å™¨;<br>æ”¯æŒHystrixå’Œå®ƒçš„Fallback;<br>æ”¯æŒRibbonçš„è´Ÿè½½å‡è¡¡;<br>æ”¯æŒHTTPè¯·æ±‚å’Œå“åº”çš„å‹ç¼©ã€‚<br>è¿™çœ‹èµ·æ¥æœ‰ç‚¹åƒæˆ‘ä»¬springmvcæ¨¡å¼çš„Controllerå±‚çš„RequestMappingæ˜ å°„  Feignæ˜¯ç”¨@FeignClientæ¥æ˜ å°„æœåŠ¡çš„ã€‚</p>
<h4 id="3-æœåŠ¡ç½‘å…³â€”â€”Netflix-Zuul"><a href="#3-æœåŠ¡ç½‘å…³â€”â€”Netflix-Zuul" class="headerlink" title="3.æœåŠ¡ç½‘å…³â€”â€”Netflix Zuul"></a>3.æœåŠ¡ç½‘å…³â€”â€”Netflix Zuul</h4><p>Zuul æ˜¯netflixå¼€æºçš„ä¸€ä¸ªAPI Gateway æœåŠ¡å™¨, æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªweb servletåº”ç”¨ã€‚<br>Zuul åœ¨äº‘å¹³å°ä¸Šæä¾›åŠ¨æ€è·¯ç”±ï¼Œç›‘æ§ï¼Œå¼¹æ€§ï¼Œå®‰å…¨ç­‰è¾¹ç¼˜æœåŠ¡çš„æ¡†æ¶ã€‚Zuul ç›¸å½“äºæ˜¯è®¾å¤‡å’Œ Netflix æµåº”ç”¨çš„ Web ç½‘ç«™åç«¯æ‰€æœ‰è¯·æ±‚çš„å‰é—¨ï¼Œä¹Ÿè¦æ³¨å†Œå…¥Eureka.<br>å‰é¢è¿™ä¸€å±‚ä¿—ç§°ä¸ºâ€œç½‘å…³å±‚â€ï¼Œå…¶å­˜åœ¨æ„ä¹‰åœ¨äºï¼Œå°†â€1å¯¹Nâ€é—®é¢˜ è½¬æ¢æˆäº†â€1å¯¹1â€é—®é¢˜ï¼ˆè·¯ç”±ï¼‰ï¼ŒåŒæ—¶åœ¨è¯·æ±‚åˆ°è¾¾çœŸæ­£çš„å¾®æœåŠ¡ä¹‹å‰ï¼Œå¯ä»¥åšä¸€äº›é¢„å¤„ç†ï¼ˆè¿‡æ»¤ï¼‰ï¼Œæ¯”å¦‚ï¼šæ¥æºåˆæ³•æ€§æ£€æµ‹ï¼Œæƒé™æ ¡éªŒï¼Œåçˆ¬è™«ä¹‹ç±»â€¦</p>
<h4 id="4-æ–­è·¯å™¨â€”â€”Netflix-Hystrix"><a href="#4-æ–­è·¯å™¨â€”â€”Netflix-Hystrix" class="headerlink" title="4.æ–­è·¯å™¨â€”â€”Netflix Hystrix"></a>4.æ–­è·¯å™¨â€”â€”Netflix Hystrix</h4><p>åœ¨ç†æƒ³çŠ¶æ€ä¸‹ï¼Œä¸€ä¸ªåº”ç”¨ä¾èµ–çš„æœåŠ¡éƒ½æ˜¯å¥åº·å¯ç”¨çš„ï¼Œæˆ‘ä»¬å¯ä»¥æ­£å¸¸çš„å¤„ç†æ‰€æœ‰çš„è¯·æ±‚,ä½†æ˜¯å¤©æœ‰ä¸æµ‹é£äº‘<br> å½“å¾®æœåŠ¡ä¸­æŸä¸€ä¸ªæœåŠ¡å‡ºé—®é¢˜çš„æ—¶å€™å‘ç”Ÿå»¶è¿Ÿï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½é˜»å¡åœ¨ä¾èµ–çš„æœåŠ¡,å¤§å¤šæ•°æœåŠ¡å™¨çš„çº¿ç¨‹æ± å°±å‡ºç°é˜»å¡(BLOCK),å½±å“æ•´ä¸ªçº¿ä¸ŠæœåŠ¡çš„ç¨³å®šæ€§<br>é«˜å¹¶å‘çš„ä¾èµ–å¤±è´¥æ—¶å¦‚æœæ²¡æœ‰éš”ç¦»æªæ–½ï¼Œå½“å‰åº”ç”¨æœåŠ¡å°±æœ‰è¢«æ‹–å®çš„é£é™©<br> Hystrixæ˜¯ä¿è¯å¾®æœåŠ¡ç¾¤å¥å£®æ¡†æ¶,åšäº†éš”ç¦»,ç†”æ–­,é™çº§ç­‰æ“ä½œ.æœ€ç»ˆè¾¾åˆ°ä¸ä¼šç”±äºæŸä¸€ä¸ªæœåŠ¡å‡ºé—®é¢˜è€Œå¯¼è‡´é›ªå´©ç°è±¡,è®©æ•´ä½“ç¾¤æ­»æ‰.</p>
<h5 id="èµ„æºéš”ç¦»ï¼ˆé™æµï¼‰ï¼š"><a href="#èµ„æºéš”ç¦»ï¼ˆé™æµï¼‰ï¼š" class="headerlink" title="èµ„æºéš”ç¦»ï¼ˆé™æµï¼‰ï¼š"></a>èµ„æºéš”ç¦»ï¼ˆé™æµï¼‰ï¼š</h5><p> åŒ…æ‹¬çº¿ç¨‹æ± éš”ç¦»å’Œä¿¡å·é‡éš”ç¦»ï¼Œé™åˆ¶è°ƒç”¨åˆ†å¸ƒå¼æœåŠ¡çš„èµ„æºä½¿ç”¨ï¼ŒæŸä¸€ä¸ªè°ƒç”¨çš„æœåŠ¡å‡ºç°é—®é¢˜ä¸ä¼šå½±å“å…¶ä»–æœåŠ¡è°ƒç”¨ã€‚<br>(1) çº¿ç¨‹æ± éš”ç¦»æ¨¡å¼ï¼šä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹æ± æ¥å­˜å‚¨å½“å‰è¯·æ±‚ï¼Œçº¿ç¨‹æ± å¯¹è¯·æ±‚ä½œå¤„ç†ï¼Œè®¾ç½®ä»»åŠ¡è¿”å›å¤„ç†è¶…æ—¶æ—¶é—´ï¼Œå †ç§¯çš„è¯·æ±‚å…ˆå…¥çº¿ç¨‹æ± é˜Ÿåˆ—ã€‚è¿™ç§æ–¹å¼è¦ä¸ºæ¯ä¸ªä¾èµ–æœåŠ¡ç”³è¯·çº¿ç¨‹æ± ï¼Œæœ‰ä¸€å®šçš„èµ„æºæ¶ˆè€—ï¼Œå¥½å¤„æ˜¯å¯ä»¥åº”å¯¹çªå‘æµé‡ï¼ˆå¤§é‡æµé‡æ¥ä¸´æ—¶ï¼Œå¤„ç†ä¸å®Œå¯å°†æ•°æ®å­˜å‚¨åˆ°çº¿ç¨‹æ± é˜Ÿé‡Œæ…¢æ…¢å¤„ç†ï¼‰<br>(2ï¼‰ä¿¡å·é‡éš”ç¦»æ¨¡å¼ï¼šä½¿ç”¨ä¸€ä¸ªåŸå­è®¡æ•°å™¨ï¼ˆæˆ–ä¿¡å·é‡ï¼‰è®°å½•å½“å‰æœ‰å¤šå°‘ä¸ªçº¿ç¨‹åœ¨è¿è¡Œï¼Œè¯·æ±‚æ¥å…ˆåˆ¤æ–­è®¡æ•°å™¨çš„æ•°å€¼ï¼Œè‹¥è¶…è¿‡è®¾ç½®çš„æœ€å¤§çº¿ç¨‹ä¸ªæ•°åˆ™ä¸¢å¼ƒè¯¥ç±»å‹çš„æ–°è¯·æ±‚ï¼Œè‹¥ä¸è¶…è¿‡åˆ™æ‰§è¡Œè®¡æ•°æ“ä½œè¯·æ±‚æ¥è®¡æ•°å™¨+1ï¼Œè¯·æ±‚è¿”å›è®¡æ•°å™¨-1ã€‚è¿™ç§æ–¹å¼æ˜¯ä¸¥æ ¼çš„æ§åˆ¶çº¿ç¨‹ä¸”ç«‹å³è¿”å›æ¨¡å¼ï¼Œæ— æ³•åº”å¯¹çªå‘æµé‡ï¼ˆæµé‡æ´ªå³°æ¥ä¸´æ—¶ï¼Œå¤„ç†çš„çº¿ç¨‹è¶…è¿‡æ•°é‡ï¼Œå…¶ä»–çš„è¯·æ±‚ä¼šç›´æ¥è¿”å›ï¼Œä¸ç»§ç»­å»è¯·æ±‚ä¾èµ–çš„æœåŠ¡ï¼‰</p>
<h5 id="èæ–­ï¼š"><a href="#èæ–­ï¼š" class="headerlink" title="èæ–­ï¼š"></a>èæ–­ï¼š</h5><p> å½“å¤±è´¥ç‡è¾¾åˆ°é˜€å€¼è‡ªåŠ¨è§¦å‘é™çº§(å¦‚å› ç½‘ç»œæ•…éšœ/è¶…æ—¶é€ æˆçš„å¤±è´¥ç‡é«˜)ï¼Œç†”æ–­å™¨è§¦å‘çš„å¿«é€Ÿå¤±è´¥ä¼šè¿›è¡Œå¿«é€Ÿæ¢å¤ã€‚<br> æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ–­è·¯å™¨å¤„äºå…³é—­çŠ¶æ€(Closed)ï¼Œ<br>å¦‚æœè°ƒç”¨æŒç»­å‡ºé”™æˆ–è€…è¶…æ—¶ï¼Œç”µè·¯è¢«æ‰“å¼€è¿›å…¥ç†”æ–­çŠ¶æ€(Open)ï¼Œåç»­ä¸€æ®µæ—¶é—´å†…çš„æ‰€æœ‰è°ƒç”¨éƒ½ä¼šè¢«æ‹’ç»(Fail Fast)ï¼Œ<br>ä¸€æ®µæ—¶é—´ä»¥åï¼Œä¿æŠ¤å™¨ä¼šå°è¯•è¿›å…¥åŠç†”æ–­çŠ¶æ€(Half-Open)ï¼Œå…è®¸å°‘é‡è¯·æ±‚è¿›æ¥å°è¯•ï¼Œ<br>        å¦‚æœè°ƒç”¨ä»ç„¶å¤±è´¥ï¼Œåˆ™å›åˆ°ç†”æ–­çŠ¶æ€<br>        å¦‚æœè°ƒç”¨æˆåŠŸï¼Œåˆ™å›åˆ°ç”µè·¯é—­åˆçŠ¶æ€;</p>
<h5 id="é™çº§æœºåˆ¶ï¼š"><a href="#é™çº§æœºåˆ¶ï¼š" class="headerlink" title="é™çº§æœºåˆ¶ï¼š"></a>é™çº§æœºåˆ¶ï¼š</h5><p> è¶…æ—¶é™çº§ã€èµ„æºä¸è¶³æ—¶(çº¿ç¨‹æˆ–ä¿¡å·é‡)é™çº§ï¼Œé™çº§åå¯ä»¥é…åˆé™çº§æ¥å£è¿”å›æ‰˜åº•æ•°æ®ã€‚<br> æ‰€è°“é™çº§ï¼Œå°±æ˜¯å½“æŸä¸ªæœåŠ¡ç†”æ–­ä¹‹åï¼ŒæœåŠ¡å™¨å°†ä¸å†è¢«è°ƒç”¨ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¯ä»¥è‡ªå·±å‡†å¤‡ä¸€ä¸ªæœ¬åœ°çš„fallbackå›è°ƒï¼Œè¿”å›ä¸€ä¸ªç¼ºçœå€¼ã€‚<br>è¿™æ ·åšï¼Œè™½ç„¶æœåŠ¡æ°´å¹³ä¸‹é™ï¼Œä½†å¥½æ­¹å¯ç”¨ï¼Œæ¯”ç›´æ¥æŒ‚æ‰è¦å¼ºï¼Œå½“ç„¶è¿™ä¹Ÿè¦çœ‹é€‚åˆçš„ä¸šåŠ¡åœºæ™¯ã€‚</p>
<h5 id="ç¼“å­˜ï¼š"><a href="#ç¼“å­˜ï¼š" class="headerlink" title="ç¼“å­˜ï¼š"></a>ç¼“å­˜ï¼š</h5><p> æä¾›äº†è¯·æ±‚ç¼“å­˜ã€è¯·æ±‚åˆå¹¶å®ç°ã€‚</p>
<h4 id="5-åˆ†å¸ƒå¼é…ç½®â€”â€”Spring-Cloud-Config"><a href="#5-åˆ†å¸ƒå¼é…ç½®â€”â€”Spring-Cloud-Config" class="headerlink" title="5.åˆ†å¸ƒå¼é…ç½®â€”â€”Spring Cloud Config"></a>5.åˆ†å¸ƒå¼é…ç½®â€”â€”Spring Cloud Config</h4><p> å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½æœ‰ä¸€ä¸ªymlé…ç½®ï¼Œç®¡ç†èµ·æ¥éº»çƒ¦ã€‚spring cloud configä¸»è¦ç”¨æ¥ç®¡ç†è¿™äº›yml<br> å®ƒæ”¯æŒé…ç½®æœåŠ¡æ”¾åœ¨é…ç½®æœåŠ¡çš„å†…å­˜ä¸­ï¼ˆå³æœ¬åœ°ï¼‰ï¼Œä¹Ÿæ”¯æŒæ”¾åœ¨è¿œç¨‹Gitä»“åº“ä¸­ã€‚åœ¨spring cloud config ç»„ä»¶ä¸­ï¼Œåˆ†ä¸¤ä¸ªè§’è‰²ï¼Œä¸€æ˜¯config serverï¼ŒäºŒæ˜¯config clientã€‚<br>ä»Šå¤©ç”±äºæ—¶é—´æœ‰é™å…ˆä»‹ç»ä¸‹æ¦‚å¿µ,æ”¹å¤©å†å…·ä½“å°†ä»£ç å®ç°</p>
<h3 id="æ¥ä¸‹æ¥è¯´è¯´ä¸¤è€…åŒºåˆ«"><a href="#æ¥ä¸‹æ¥è¯´è¯´ä¸¤è€…åŒºåˆ«" class="headerlink" title="æ¥ä¸‹æ¥è¯´è¯´ä¸¤è€…åŒºåˆ«"></a>æ¥ä¸‹æ¥è¯´è¯´ä¸¤è€…åŒºåˆ«</h3><p>Dubboï¼Œæ˜¯é˜¿é‡Œå·´å·´æœåŠ¡åŒ–æ²»ç†çš„æ ¸å¿ƒæ¡†æ¶ï¼Œåœ¨ä¸­å›½è¢«å¹¿æ³›ä½¿ç”¨ï¼›<br>Spring Cloud æ˜¯Springçš„äº§å“,ä»–ä»¬ä¸“æ³¨å¼€å‘å‡ºé€šç”¨ã€å¼€æºã€ç¨³å¥çš„å¼€æºæ¡†æ¶</p>
<pre><code>å¯¹æ¯”äº†ç½‘ä¸Šä¸€äº›è¯´æ³•æ€»çš„æ¥è¯´</code></pre><p>ç¤¾åŒºæ´»è·ƒåº¦springæ›´åŠ æ´»è·ƒ<br>Dubboæœ‰ä¸­æ–‡æ–‡æ¡£å¯¹ä¸­å›½å¼€å‘è€…æ¥è¯´æ›´åŠ å‹å¥½<br>Dubboåªæ˜¯å®ç°äº†æœåŠ¡æ²»ç†ï¼Œè€ŒSpring Cloudåˆ†åˆ«è¦†ç›–äº†å¾®æœåŠ¡æ¶æ„ä¸‹çš„æ–¹æ–¹é¢é¢ï¼ŒæœåŠ¡æ²»ç†åªæ˜¯å…¶ä¸­çš„ä¸€ä¸ªæ–¹é¢ï¼Œä¸€å®šç¨‹åº¦æ¥è¯´ï¼ŒDubboåªæ˜¯Spring Cloud Netflixä¸­çš„ä¸€ä¸ªå­é›†ã€‚ä½†æ˜¯åœ¨é€‰æ‹©æ¡†æ¶ä¸Šï¼Œæ–¹æ¡ˆå®Œæ•´åº¦æ°æ°æ˜¯ä¸€ä¸ªéœ€è¦é‡ç‚¹å…³æ³¨çš„å†…å®¹ã€‚<br>Dubboæ™‹å‡ä¸ºApacheé¡¶çº§é¡¹ç›®å¯¹Dubboå°†è¿›ä¸€æ­¥çš„ä¼˜åŒ–,æ½œåŠ›æ— é™<br> å¹¶ä¸”ä¸¤è€…ä¹‹ä¸Šè¿˜æœ‰ä¸€ä¸ªè¿›åŒ–ç‰ˆæœ¬<br> spring-cloud-dubbo</p>
<p> <a href="http://springcloud.cn/view/327" target="_blank" rel="noopener">è¯¦æƒ…è§Spring Cloudä¸­å›½ç¤¾åŒº</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/09/18/cloudä¸dubboçš„åŒºåˆ«è¯¦è§£/" data-id="ck0ulbmay000294v68foxx1bv" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="photo-mybatis" class="article article-type-photo" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/10/mybatis/" class="article-date">
  <time datetime="2019-05-10T15:17:32.000Z" itemprop="datePublished">2019-05-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/10/mybatis/">mybatisä¸­çš„$ä¸#</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#{}(æ¥æ”¶æ™®é€šå‚æ•°,é¢„ç¼–è¯‘,æ€§èƒ½å¥½,å®‰å…¨æ€§é«˜)<br>$æ­£å¥½ç›¸åä»–æ˜¯ç›´æ¥æ‹¼æ¥å­—ç¬¦ä¸²</p>
<ol>
<li>${}</li>
</ol>
<ul>
<li>åªèƒ½è·å–çš„æ˜¯ä¼ è¿‡æ¥çš„å¯¹è±¡çš„ä¸€ä¸ªå±æ€§(æ‹¼æ¥å­—ç¬¦ä¸²)<pre><code>select * from product where id= ${id}
 -&gt; å±é™©:æœ‰SQLæ³¨å…¥çš„é—®é¢˜
 è¿™ç§æ–¹å¼èƒ½ä¸ç”¨å°±ä¸è¦ä½¿ç”¨</code></pre></li>
</ul>
<p> 2.#{}</p>
<ul>
<li>#ï¼šå³å¯ä»¥è·å–ä¼ è¿‡æ¥çš„ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥è·å–ä¼ è¿‡æ¥çš„å¯¹è±¡çš„å±æ€§(å ä½)<pre><code>select * from product where id= ?
é˜²SQLæ³¨å…¥,æ€§èƒ½ä¹Ÿæ›´å¥½</code></pre></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/10/mybatis/" data-id="ck0ulbmak000094v6qvoexfok" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="photo-mybatisTwo" class="article article-type-photo" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/28/mybatisTwo/" class="article-date">
  <time datetime="2018-06-28T15:19:33.000Z" itemprop="datePublished">2018-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/28/mybatisTwo/">mybatis çš„ååˆ†è¯¦ç»†çš„å…¥é—¨æ•™ç¨‹ç¬¬äºŒå¼¹</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>mybatis çš„ååˆ†è¯¦ç»†çš„å…¥é—¨æ•™ç¨‹ç¬¬äºŒå¼¹</strong></p>
<h2 id="æ­¥éª¤-å¤ä¹ "><a href="#æ­¥éª¤-å¤ä¹ " class="headerlink" title="æ­¥éª¤(å¤ä¹ )"></a>æ­¥éª¤(å¤ä¹ )</h2><h3 id="å¯¼åŒ…"><a href="#å¯¼åŒ…" class="headerlink" title="å¯¼åŒ…"></a>å¯¼åŒ…</h3><p>â€‹    æ ¸å¿ƒåŒ…</p>
<p>mybatis-3.2.1.jar</p>
<p>â€‹    ä¾èµ–åŒ…</p>
<p>asm-3.3.1.jar<br>cglib-2.2.2.jar<br>commons-logging-1.1.1.jar<br>javassist-3.17.1-GA.jar<br>log4j-1.2.17.jar<br>slf4j-api-1.7.2.jar<br>slf4j-log4j12-1.7.2.jar</p>
<p>â€‹    æ•°æ®åº“ä¾èµ–åŒ…</p>
<p>mysql-connector-java-5.1.26-bin.jar</p>
<h3 id="domain"><a href="#domain" class="headerlink" title="domain"></a>domain</h3><p>æ•°æ®åº“å»ºè¡¨</p>
<p>domainæ˜ å°„</p>
<p>getset</p>
<p>tostring</p>
<h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p>æ‹·è´æ–‡æ¡£</p>
<p>ä¿®æ”¹ä¸ºè‡ªå·±çš„æ•°æ®åº“é…ç½®</p>
<p>å¼•ç”¨æ•°æ®åº“å››å¤§é‡‘åˆšpropertiesæ–‡ä»¶</p>
<h3 id="dao"><a href="#dao" class="headerlink" title="dao"></a>dao</h3><p>æ–°å»ºæ¥å£</p>
<p>mapper.xmlæ‹·è´æ–‡æ¡£</p>
<p>å†™å…¥sqlæŸ¥è¯¢æˆ–å…¶ä»–æ“ä½œ</p>
<p>mybatisé…ç½®æ–‡ä»¶å¼•å…¥mapper.xml</p>
<h3 id="log4j"><a href="#log4j" class="headerlink" title="log4j"></a>log4j</h3><p>æ‹·è´log4j.propertiesæ–‡ä»¶</p>
<h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><h2 id="æ˜ å°„"><a href="#æ˜ å°„" class="headerlink" title="æ˜ å°„"></a>æ˜ å°„</h2><p>(mapper==dao==repostory)</p>
<h3 id="mapperå±‚"><a href="#mapperå±‚" class="headerlink" title="mapperå±‚"></a>mapperå±‚</h3><p>ä¸éœ€è¦å®ç°ç±»</p>
<p>mapper.xmlæ–‡ä»¶æ”¾å…¥mapperåŒ…</p>
<p>åå­—è·Ÿæ¥å£ä¸€è‡´==ç±»å+â€mapperâ€</p>
<p>å‘½åç©ºé—´ === mapperæ¥å£å…¨é™å®šå</p>
<p>æ–¹æ³•å  ===  sql çš„ Id</p>
<p>å¼•å…¥mapper.xml</p>
<p>session.getMapper()</p>
<p>è‡ªåŠ¨è·å–å®ç°ç±»</p>
<h3 id="sqlå†™åˆ°ç±»é‡Œ"><a href="#sqlå†™åˆ°ç±»é‡Œ" class="headerlink" title="sqlå†™åˆ°ç±»é‡Œ"></a>sqlå†™åˆ°ç±»é‡Œ</h3><p>æ¥å£æŸ¥è¯¢æ–¹æ³•å¤´åŠ æ³¨è§£@select(sql)</p>
<p>å…¶ä»–æ“ä½œæ³¨è§£ä¸sqlä¸€è‡´</p>
<h3 id="é«˜çº§-æ¨¡ç³ŠæŸ¥è¯¢"><a href="#é«˜çº§-æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="é«˜çº§||æ¨¡ç³ŠæŸ¥è¯¢"></a>é«˜çº§||æ¨¡ç³ŠæŸ¥è¯¢</h3><p>å†™ä¸€ä¸ªqueryç±»å†™å…¥æŸ¥è¯¢æ¡ä»¶</p>
<p>sqlä¼ å…¥queryå¯¹è±¡</p>
<p>sqlé‡Œæ‹¼æ¥å­—ç¬¦ä¸²çš„æ”¾æ–¹æ³•   concat(å¯å˜å‚æ•°,åˆ—åéšæ„æ”¾,å¯å˜å‚æ•°)</p>
<p>damo</p>
<p><img src="https://img-blog.csdnimg.cn/20190803221210161.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2pjZXRwb29y,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>mybatiså¯ä»¥è¿›è¡Œifåˆ¤æ–­</p>
<p>demo</p>
<p><img src="https://img-blog.csdnimg.cn/20190803221310928.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2pjZXRwb29y,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h4 id="ç‰¹æ®Šç¬¦å·"><a href="#ç‰¹æ®Šç¬¦å·" class="headerlink" title="ç‰¹æ®Šç¬¦å·"></a>ç‰¹æ®Šç¬¦å·</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&amp;lt;     <span class="tag">&lt;</span></span><br><span class="line"><span class="tag">&amp;<span class="attr">gt</span>;     &gt;</span></span><br><span class="line">&lt;![CDATA[æ•°æ®]]&gt;           cdataä¸­çš„æ•°æ®ä¸ä¼šè¢«è¯†åˆ«ä¸ºè¯­æ³•</span><br></pre></td></tr></table></figure>

<h4 id="whereæŸ¥è¯¢é—®é¢˜"><a href="#whereæŸ¥è¯¢é—®é¢˜" class="headerlink" title="whereæŸ¥è¯¢é—®é¢˜"></a>whereæŸ¥è¯¢é—®é¢˜</h4><p>demo</p>
<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥(img-QEkuVrdp-1564823219925)(1564712967398.png)]<img src="https://img-blog.csdnimg.cn/20190803221439485.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2pjZXRwb29y,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h4 id="æ‰¹å¤„ç†"><a href="#æ‰¹å¤„ç†" class="headerlink" title="æ‰¹å¤„ç†"></a>æ‰¹å¤„ç†</h4><h5 id="æ‰¹æ·»åŠ "><a href="#æ‰¹æ·»åŠ " class="headerlink" title="æ‰¹æ·»åŠ "></a>æ‰¹æ·»åŠ </h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--è¿™é‡Œå†™é›†åˆ   æ‰¹é‡æ·»åŠ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"bitchSave"</span> <span class="attr">parameterType</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">     insert into employee (name, age, sex) values </span><br><span class="line">       <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"list"</span> <span class="attr">item</span>=<span class="string">"emp"</span>  <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">           ( #&#123;emp.name&#125;,#&#123;emp.age&#125;,#&#123;emp.sex&#125;)</span><br><span class="line">       <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="ä¸¤ç§æ‰¹åˆ é™¤"><a href="#ä¸¤ç§æ‰¹åˆ é™¤" class="headerlink" title="ä¸¤ç§æ‰¹åˆ é™¤"></a>ä¸¤ç§æ‰¹åˆ é™¤</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ‰¹åˆ é™¤list--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"bitchDelete"</span> <span class="attr">parameterType</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">       delete from employee where id in</span><br><span class="line">       <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"list"</span> <span class="attr">item</span>=<span class="string">"id"</span> <span class="attr">separator</span>=<span class="string">","</span> <span class="attr">open</span>=<span class="string">"("</span> <span class="attr">close</span>=<span class="string">")"</span>&gt;</span></span><br><span class="line">           #&#123;id&#125;</span><br><span class="line">       <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--æ‰¹åˆ é™¤arr--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"bitchDeleteByArr"</span> <span class="attr">parameterType</span>=<span class="string">"long[]"</span>&gt;</span></span><br><span class="line">       delete from employee where id in</span><br><span class="line">       <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"array"</span> <span class="attr">item</span>=<span class="string">"id"</span> <span class="attr">separator</span>=<span class="string">","</span> <span class="attr">open</span>=<span class="string">"("</span> <span class="attr">close</span>=<span class="string">")"</span>&gt;</span></span><br><span class="line">           #&#123;id&#125;</span><br><span class="line">       <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="åŠ¨æ€ä¿®æ”¹"><a href="#åŠ¨æ€ä¿®æ”¹" class="headerlink" title="åŠ¨æ€ä¿®æ”¹"></a>åŠ¨æ€ä¿®æ”¹</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åŠ¨æ€ä¿®æ”¹,&lt;set&gt;å¯ä»¥è‡ªåŠ¨åŠ setå…³é”®å­—å»é€—å·--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"dynamicUpdate"</span> <span class="attr">parameterType</span>=<span class="string">"cn.itsource.domain.Employee"</span> &gt;</span></span><br><span class="line">        update employee</span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"name!=null and name!=''"</span>&gt;</span></span><br><span class="line">              name = #&#123;name&#125;,</span><br><span class="line">          <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"age!=null"</span>&gt;</span></span><br><span class="line">              age = #&#123;age&#125;,</span><br><span class="line">          <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"sex!=null"</span>&gt;</span></span><br><span class="line">              sex = #&#123;sex&#125;,</span><br><span class="line">          <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="æ˜ å°„å…³ç³»"><a href="#æ˜ å°„å…³ç³»" class="headerlink" title="æ˜ å°„å…³ç³»"></a>æ˜ å°„å…³ç³»</h2><h3 id="å¤šå¯¹ä¸€-many-to-One"><a href="#å¤šå¯¹ä¸€-many-to-One" class="headerlink" title="å¤šå¯¹ä¸€(many to One)"></a>å¤šå¯¹ä¸€(many to One)</h3><p>== ä¸€å¯¹ä¸€</p>
<p>æ–°å»ºä¸¤ä¸ªè¡¨</p>
<p>å¤šæ–¹æ·»åŠ ä¸€æ–¹çš„å¤–é”®</p>
<p>åˆ›å»ºğŸ˜€domain</p>
<p>å¤šæ–¹æŒæœ‰ä¸€æ–¹å¯¹è±¡</p>
<p>åˆ›å»ºmapper</p>
<p>åˆ›å»ºmapper.xml</p>
<p>æ ¸å¿ƒé…ç½®æ–‡ä»¶å¼•å…¥mapper.xml</p>
<h4 id="å†™ä¿å­˜æ–¹æ³•"><a href="#å†™ä¿å­˜æ–¹æ³•" class="headerlink" title="å†™ä¿å­˜æ–¹æ³•"></a>å†™ä¿å­˜æ–¹æ³•</h4><p>å¤šæ–¹sqlé‡Œ#{dir.id}ç‚¹å‡ºä¸€æ–¹id</p>
<p>å¤šæ–¹ä¸­ä¿å­˜ä¸€æ–¹</p>
<p>å…ˆä¿å­˜ä¸€æ–¹,å†ä¿å­˜å¤šæ–¹</p>
<p>ä¸€æ–¹ä¿å­˜åè·å–idæ‰èƒ½æ·»åŠ å¤–é”®</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ·»åŠ å¤šæ–¹æ–¹æ³•,ä½¿ç”¨#&#123;dir.id&#125;ç±»ä¸­çš„åˆ†ç±»ç‚¹å‡ºidå­˜å…¥æ•°æ®åº“--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"save"</span> <span class="attr">parameterType</span>=<span class="string">"cn.itsource._02many2one.Product"</span>&gt;</span></span><br><span class="line">       insert into t_product (name, dir_id)</span><br><span class="line">       values (#&#123;name&#125;, #&#123;dir.id&#125;)</span><br><span class="line">   <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="æŸ¥è¯¢æ‰€æœ‰"><a href="#æŸ¥è¯¢æ‰€æœ‰" class="headerlink" title="æŸ¥è¯¢æ‰€æœ‰"></a>æŸ¥è¯¢æ‰€æœ‰</h4><p>æ–¹æ³•ä¸mapper.xmlå¯¹åº”</p>
<p>join  on</p>
<p>ä»¥ä¸‹ä¸‰ç§æ–¹å¼éƒ½ä½¿ç”¨è¿™æ¡sql</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> p.id pid, p.name pname, dir.id dirid, dir.name dirname</span><br><span class="line"><span class="keyword">from</span> T_product p</span><br><span class="line"><span class="keyword">join</span> productdir dir <span class="keyword">on</span> dir.id = p.dir_id</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æŸ¥è¯¢æ‰€æœ‰çš„sql å¼•å…¥ä¸‹é¢ä¸‰æ¡ProductResultmapè¿”å›--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"ProductResultmap"</span>&gt;</span></span><br><span class="line">        select p.id pid, p.name pname, dir.id dirid, dir.name dirname</span><br><span class="line">        from T_product p</span><br><span class="line">                 join productdir dir on dir.id = p.dir_id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¸‰ç§æ–¹æ³•ä»å¤šæ–¹æŸ¥è¯¢å‡ºä¸€æ–¹</p>
<p>ç¬¬ä¸€ç§å®˜æ–¹æ¨è</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æŸ¥è¯¢æ‰€æœ‰çš„resultMap å®˜æ–¹æ¨èçš„å†™æ³•--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--idä¸ºæ ‡è¯†ç¬¦   typeæ˜¯å¤šæ–¹ç±»å‹--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"ProductResultmap"</span> <span class="attr">type</span>=<span class="string">"cn.itsource._02many2one.Product"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åˆ†åˆ«æ˜¯å±æ€§å’Œåˆ—ä¸­çš„åå­— idä½¿ç”¨&lt;id&gt; å…¶ä»–å±æ€§ä½¿ç”¨&lt;result&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"pid"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"pname"</span> <span class="attr">property</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--å…³è” association  javaTypeä¸€æ–¹çš„ç±»å‹  property ä¸€æ–¹åœ¨å¤šæ–¹ç±»é‡Œçš„å±æ€§å--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"dir"</span> <span class="attr">javaType</span>=<span class="string">"cn.itsource._02many2one.ProductDir"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--åˆ†åˆ«æ˜¯å±æ€§å’Œåˆ—ä¸­çš„åå­— idä½¿ç”¨&lt;id&gt; å…¶ä»–å±æ€§ä½¿ç”¨&lt;result&gt;--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"dirid"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"dirname"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒç§é‡è·¯å­çœäº‹</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æŸ¥è¯¢æ‰€æœ‰çš„resultMap çœäº‹çš„é‡è·¯å­--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"ProductResultmap2"</span> <span class="attr">type</span>=<span class="string">"cn.itsource._02many2one.Product"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"dirid"</span> <span class="attr">property</span>=<span class="string">"dir.id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"dirname"</span> <span class="attr">property</span>=<span class="string">"dir.name"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸‰ç§æ€§èƒ½æœ€å·®å‘é€å¤šæ¡sqlèƒ½ä¸ç”¨åˆ™ä¸ç”¨</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æŸ¥è¯¢æ‰€æœ‰çš„resultMap åµŒå¥—æ˜ å°„ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"ProductResultmap3"</span> <span class="attr">type</span>=<span class="string">"cn.itsource._02many2one.Product"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--åˆ†åˆ«æ˜¯å±æ€§å’Œåˆ—ä¸­çš„åå­— idä½¿ç”¨&lt;id&gt; å…¶ä»–å±æ€§ä½¿ç”¨&lt;result&gt;--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"pid"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"pname"</span> <span class="attr">property</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!--æ€§èƒ½è¾ƒå·®,èƒ½ä¸ç”¨å°±ä¸è¦ç”¨  select="cn.itsource._02many2one.ProductDirMapper.findOne"æ˜¯å¦ä¸€æ¡sql   column="dirid"æ˜¯ä¼ é€’è¿‡å»çš„å‚æ•°--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"dir"</span> <span class="attr">javaType</span>=<span class="string">"cn.itsource._02many2one.ProductDir"</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">column</span>=<span class="string">"dirid"</span> <span class="attr">select</span>=<span class="string">"cn.itsource._02many2one.ProductDirMapper.findOne"</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¸€å¯¹å¤š"><a href="#ä¸€å¯¹å¤š" class="headerlink" title="ä¸€å¯¹å¤š"></a>ä¸€å¯¹å¤š</h3><p>== å¤šå¯¹å¤š</p>
<p>å…³è”é›†åˆä½¿ç”¨collectionè€Œä¸æ˜¯association</p>
<p>å®˜æ–¹æ¨èæ–¹æ³• ä¸€æ¡sqlæ€§èƒ½æ¯”è¾ƒå¥½   è¿”å›</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!--ç¬¬ä¸€ç§æ–¹æ³•--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"findAllresultMap2"</span>&gt;</span></span><br><span class="line">        select p.id pid, p.name pname, dir.id dirid, dir.name dirname</span><br><span class="line">        from productdir dir</span><br><span class="line">                 join t_product p on p.dir_id = dir.id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!--è¿”å›æ ¼å¼map--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç¬¬ä¸€ç§æ–¹æ³•çš„resultMap--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"findAllresultMap"</span> <span class="attr">type</span>=<span class="string">"cn.itsource._03one2many.ProductDir"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"dirid"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"dirname"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--property="products"æ˜¯ä¸€æ–¹é‡Œçš„å¤šæ–¹å±æ€§--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ofType="cn.itsource._03one2many.Product"æ˜¯å¤šæ–¹å±æ€§--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ä¸€å¯¹å¤šé‡Œä½¿ç”¨conlectionæ ‡ç­¾--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"products"</span> <span class="attr">ofType</span>=<span class="string">"cn.itsource._03one2many.Product"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"pid"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"pname"</span> <span class="attr">property</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒç§æ–¹å¼æ€§èƒ½å·®</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!--ç¬¬äºŒç§æ–¹æ³•,å…ˆæŸ¥ä¸€æ–¹,å†ç”¨å¤šæ–¹æŸ¥è¯¢ä¸€æ–¹å‘é€å¤šæ¡sql--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"findAllresultMap2"</span>&gt;</span></span><br><span class="line">        select dir.id dirid, dir.name dirname</span><br><span class="line">        from productdir dir</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è¿”å›æ ¼å¼map--&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--æƒ¯ä¾‹è¿˜æœ‰ç¬¬äºŒç§æ–¹æ³•  æ€§èƒ½æœ€å·®å‘é€å¤šæ¡sqlèƒ½ä¸ç”¨åˆ™ä¸ç”¨   column="dirid"æ˜¯ä¼ é€’è¿‡å»çš„å‚æ•°</span></span><br><span class="line"><span class="comment">	select="cn.itsource._03one2many.ProductMapper.findAllBydirId"æ˜¯sqlçš„è·¯å¾„</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"findAllresultMap2"</span> <span class="attr">type</span>=<span class="string">"cn.itsource._03one2many.ProductDir"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"dirid"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"dirname"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"products"</span> <span class="attr">ofType</span>=<span class="string">"cn.itsource._03one2many.Product"</span> <span class="attr">select</span>=<span class="string">"cn.itsource._03one2many.ProductMapper.findAllBydirId"</span> <span class="attr">column</span>=<span class="string">"dirid"</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"pid"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"pname"</span> <span class="attr">property</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--è°ƒç”¨çš„sql  ç”¨ä¸€æ–¹idæŸ¥è¯¢å¤šæ–¹--&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAllBydirId"</span> <span class="attr">parameterType</span>=<span class="string">"Long"</span> 			<span class="attr">resultType</span>=<span class="string">"cn.itsource._03one2many.Product"</span>&gt;</span></span><br><span class="line">       select * from t_product where dir_id = #&#123;dirid&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h3><h4 id="è‡ªå¸¦ä¸€çº§ç¼“å­˜"><a href="#è‡ªå¸¦ä¸€çº§ç¼“å­˜" class="headerlink" title="è‡ªå¸¦ä¸€çº§ç¼“å­˜"></a>è‡ªå¸¦ä¸€çº§ç¼“å­˜</h4><h4 id="äºŒçº§ç¼“å­˜"><a href="#äºŒçº§ç¼“å­˜" class="headerlink" title="äºŒçº§ç¼“å­˜"></a>äºŒçº§ç¼“å­˜</h4><p>æ ¸å¿ƒé…ç½®ä¸­åŠ å…¥<cache>æ ‡ç­¾å³å¯</cache></p>
<p>ç„¶ådomainå¿…é¡»åºåˆ—åŒ–</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å®ç°Serializable</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/28/mybatisTwo/" data-id="ck0ulbmc1000594v6yaul00ys" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="photo-mybatisOne" class="article article-type-photo" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/19/mybatisOne/" class="article-date">
  <time datetime="2018-06-19T15:14:46.000Z" itemprop="datePublished">2018-06-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/19/mybatisOne/">mybatis çš„ååˆ†è¯¦ç»†çš„å…¥é—¨æ•™ç¨‹</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ä¸€-mybatis-çš„ååˆ†è¯¦ç»†çš„å…¥é—¨æ•™ç¨‹"><a href="#ä¸€-mybatis-çš„ååˆ†è¯¦ç»†çš„å…¥é—¨æ•™ç¨‹" class="headerlink" title="ä¸€. mybatis çš„ååˆ†è¯¦ç»†çš„å…¥é—¨æ•™ç¨‹"></a>ä¸€. mybatis çš„ååˆ†è¯¦ç»†çš„å…¥é—¨æ•™ç¨‹</h2><h3 id="mybatisèµ·æº"><a href="#mybatisèµ·æº" class="headerlink" title="mybatisèµ·æº?"></a>mybatisèµ·æº?</h3><p>MyBatis æœ¬æ˜¯apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®iBatis,<br>2010å¹´è¿™ä¸ªé¡¹ç›®ç”±apache software foundation è¿ç§»åˆ°äº†google codeï¼Œ<br>å¹¶ä¸”æ”¹åä¸ºMyBatis<br>iBATISä¸€è¯æ¥æºäºâ€œinternetâ€å’Œâ€œabatisâ€çš„ç»„åˆï¼Œæ˜¯ä¸€ä¸ªåŸºäºJavaçš„æŒä¹…å±‚æ¡†æ¶ã€‚<br>iBATISæä¾›çš„æŒä¹…å±‚æ¡†æ¶åŒ…æ‹¬SQL Mapsï¼ˆXMLæ˜ å°„é…ç½®ï¼‰å’ŒData Access Objectsï¼ˆDaoï¼‰</p>
<h3 id="mybatiä»‹ç»"><a href="#mybatiä»‹ç»" class="headerlink" title="mybatiä»‹ç»"></a>mybatiä»‹ç»</h3><p>MyBatis æ˜¯ä¸€ä¸ªæ”¯æŒæ™®é€šSQLæŸ¥è¯¢ï¼Œå­˜å‚¨è¿‡ç¨‹(    Oracleæœ€åä¸€å¤©)å’Œé«˜çº§æ˜ å°„çš„ä¼˜ç§€æŒä¹…å±‚æ¡†æ¶ã€‚<br>MyBatis æ¶ˆé™¤äº†å‡ ä¹æ‰€æœ‰çš„JDBCä»£ç å’Œæ‰‹å·¥è®¾ç½®å‚æ•°ä»¥åŠç»“æœé›†çš„æ£€ç´¢ã€‚<br>MyBatis ä½¿ç”¨ç®€å•çš„ XMLæˆ–æ³¨è§£ç”¨äºé…ç½®å’ŒåŸå§‹æ˜ å°„ï¼Œå°†æ¥å£å’Œ Java çš„POJOsï¼ˆPlain Old Java Objectsï¼Œæ™®é€šçš„ Javaå¯¹è±¡ï¼‰æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚<br>MyBatisä¸èƒ½è‡ªåŠ¨åˆ›å»ºè¡¨ï¼Œå¦‚æœèƒ½å¤Ÿè‡ªåŠ¨å»ºè¡¨ï¼Œå¿…é¡»è‡ªå·±å…ˆå‡†å¤‡å¥½å»ºè¡¨çš„sqlè¯­å¥ã€‚</p>
<h3 id="èµ·æ­¥"><a href="#èµ·æ­¥" class="headerlink" title="èµ·æ­¥"></a>èµ·æ­¥</h3><p> æ­¥éª¤<br>1 å¯¼åŒ…<br>2 å»ºè¡¨(product)<br>3 domain(Product)<br>4 å‡†å¤‡daoå±‚(CRUD)<br>5 æµ‹è¯•(ä¸æ˜¯å¿…éœ€çš„)<br>æ³¨æ„:æˆ‘ä»¬è¦å¼•å“ªäº›åŒ…?<br>1 ä¸€å®šè¦å¼•å…¥é©±åŠ¨åŒ…(ä¸è¦å¿˜äº†)<br>2 å¯¼å…¥mybatisçš„æ ¸å¿ƒåŒ…<br>3 å¯¼å…¥mybatisçš„ä¾èµ–åŒ…</p>
<p>jaråŒ…å¯ä»¥å»ç½‘ä¸Šä¸‹è½½<br><img src="https://img-blog.csdnimg.cn/20190801210153975.png" alt="å¯¼å…¥jaråŒ…"></p>
<p>MyBatis-Config.xmlé…ç½®æ–‡ä»¶(ç›´æ¥æ‹·è´,åç»­ä¼šè®²è§£)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br><span class="line">        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt; </span><br><span class="line"></span><br><span class="line">&lt;configuration&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;!--å¼•å…¥é…ç½®æ–‡ä»¶å››å¤§é‡‘åˆš--&gt;</span><br><span class="line">    &lt;properties resource=&quot;db.properties&quot;&gt;&lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--åˆ«å--&gt;</span><br><span class="line">    &lt;typeAliases&gt;</span><br><span class="line">        &lt;package name=&quot;cn.itsource.domain&quot;&gt;&lt;/package&gt;</span><br><span class="line">    &lt;/typeAliases&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--ç¯å¢ƒä»¬--&gt;&lt;!--é»˜è®¤ç¯å¢ƒ--&gt;</span><br><span class="line">    &lt;environments default=&quot;development&quot;&gt;</span><br><span class="line">        &lt;!--ç¯å¢ƒ--&gt;</span><br><span class="line">        &lt;environment id=&quot;development&quot;&gt;</span><br><span class="line"></span><br><span class="line">            &lt;transactionManager type=&quot;JDBC&quot;&gt;&lt;/transactionManager&gt;</span><br><span class="line">            &lt;!--</span><br><span class="line">                dataSource:æ•°æ®åº“ï¼Œè¿æ¥æ± (é…ç½®å››å¤§é‡‘åˆš:driven,url,username,password)</span><br><span class="line">                    type:è¿æ¥æ± çš„ç±»å‹  UNPOOLED|POOLED|JNDI</span><br><span class="line">                        UNPOOLED: è¿™ä¸ªæ•°æ®æºçš„å®ç°æ˜¯æ¯æ¬¡è¢«è¯·æ±‚æ—¶ç®€å•æ‰“å¼€å’Œå…³é—­è¿æ¥</span><br><span class="line">                        POOLED:è¿™æ˜¯ JDBC è¿æ¥å¯¹è±¡çš„æ•°æ®æºè¿æ¥æ± çš„å®ç°</span><br><span class="line">                        JNDI:è¿™ä¸ªæ•°æ®æºçš„å®ç°æ˜¯ä¸ºäº†ä½¿ç”¨å¦‚ Spring æˆ–åº”ç”¨æœåŠ¡å™¨è¿™ç±»çš„å®¹å™¨</span><br><span class="line">            --&gt;</span><br><span class="line">            &lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class="line">                &lt;property name=&quot;driver&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">                &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">                &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">                &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">            &lt;/dataSource&gt;</span><br><span class="line">        &lt;/environment&gt;</span><br><span class="line">    &lt;/environments&gt;</span><br><span class="line">&lt;mappers&gt;</span><br><span class="line">    &lt;!--åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°å’±ä»¬çš„SQLæ˜ å°„æ–‡ä»¶--&gt;</span><br><span class="line">    &lt;mapper resource=&quot;cn/itsource/dao/Productmaper.xml&quot;&gt;&lt;/mapper&gt;</span><br><span class="line">&lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>

<p>propertiesæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver=com.mysql.jdbc.Driver #æ•°æ®åº“é©±åŠ¨</span><br><span class="line">jdbc.url=jdbc:mysql:///mybatis    #mybatisæ”¹ä¸ºä½ çš„è¡¨å</span><br><span class="line">jdbc.username=root    #æ•°æ®åº“è´¦å·</span><br><span class="line">jdbc.password=123456  #æ•°æ®åº“å¯†ç </span><br><span class="line">#å››å¤§é‡‘åˆš</span><br></pre></td></tr></table></figure>

<p>æ ¸å¿ƒæ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªmappers,å®ƒæŒ‡å‘äº†ä¸€ä¸ªæ˜ å°„æ–‡ä»¶ã€‚æ˜ å°„æ–‡ä»¶åœ¨å“ªï¼Ÿ</p>
<p>,è¿™ä¸ªxmlå°±æ˜¯å’±ä»¬éœ€è¦çš„æ˜ å°„æ–‡ä»¶ï¼Œå®ƒå°±å¯ä»¥ä½“ç°å‡ºORMï¼Œå¹¶ä¸”åœ¨è¿™é‡Œé¢,ä¹Ÿå¯ä»¥æ„‰å¿«çš„å†™sqlè¯­å¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; </span><br><span class="line">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line">&lt;!-- </span><br><span class="line">	è¿™ä¸ªMapperçš„ä¸»è¦åŠŸèƒ½å°±æ˜¯å†™sql</span><br><span class="line">	mapper:æ ¹</span><br><span class="line">	namespace:å‘½ä»¤ç©ºé—´ (ç”¨æ¥ç¡®å®šå”¯ä¸€) ä»¥å‰è¿™ä¸ªæ˜¯å¯ä»¥ä¸åŠ çš„,ç°åœ¨å¿…éœ€åŠ </span><br><span class="line">     namespaceçš„å€¼ï¼Œè§„åˆ™çš„ï¼šæ˜ å°„æ–‡ä»¶XxxMapper.xmlæ‰€åœ¨çš„åŒ…+domainç±»å+Mapper</span><br><span class="line"> --&gt;</span><br><span class="line">&lt;mapper namespace=&quot;cn.itsource.mybatis.day1._1_hello.ProductMapper&quot;&gt;</span><br><span class="line">	&lt;!-- </span><br><span class="line">		select : è¿™é‡Œé¢å†™æŸ¥è¯¢è¯­å¥</span><br><span class="line">		id:ç”¨æ¥ç¡®å®šè¿™æ¡sqlè¯­å¥çš„å”¯ä¸€</span><br><span class="line">			   ä»¥åæˆ‘ä»¬ç¡®å®šå”¯ä¸€,ä¹Ÿå°±æ˜¯æ‰¾sqlè¯­å¥ : namespace +.+ id</span><br><span class="line">			 ä¾‹: cn.itsource.mybatis.day1._1_hello.ProductMapper.get</span><br><span class="line">		parameterType : ä¼ å…¥çš„å‚æ•°ç±»å‹  long:å¤§Long  _long:å°long (å…·ä½“çš„å¯¹åº”è¯·å‚è§æ–‡æ¡£)</span><br><span class="line">		resultType : ç»“æœç±»å‹(ç¬¬ä¸€æ¡æ•°æ®è¿”å›çš„å¯¹è±¡ç±»å‹) è‡ªå·±çš„å¯¹è±¡ä¸€å®šæ˜¯å…¨é™å®šç±»å</span><br><span class="line">	 --&gt;</span><br><span class="line">	&lt;select id=&quot;get&quot; parameterType=&quot;long&quot; resultType=&quot;cn.itsource.domain.Product&quot;&gt;</span><br><span class="line">		select * from product where id = #&#123;id&#125;</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„äº‹é¡¹</p>
<p>æˆ‘ä»¬çš„æ˜ å°„æ–‡ä»¶ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯å’Œå®ƒå¯¹åº”çš„domainå®ä½“ç±»åœ¨åŒä¸€ä¸ªå±‚çº§<br>â‘¡ è¿™ä¸ªæ˜ å°„æ–‡ä»¶çš„åç§°ä¸€èˆ¬å«åš XxxMapper.xml (Xxxä»£è¡¨çš„æ˜¯å®ä½“ç±»åç§°)<br>â‘¢ namespaceçš„åç§°ä¸ºäº†ç¡®å®šå”¯ä¸€æ€§ï¼Œè¯·å¤§å®¶æ ¹æ®æˆ‘çš„è¦æ±‚å–å<br>    å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªç±»ï¼š<br>    cn.itsource.domain.Product / cn.itsource.domain.Student<br>    é‚£è¿™é‡Œå–ååº”è¯¥æ˜¯ï¼š<br>    cn.itsource.domain.ProductMapper /cn.itsource.domain.StudentMapper<br>â‘£ é™¤äº†MyBatisæ”¯æŒçš„ç±»å‹ï¼Œå…¶å®ƒçš„ç±»å‹éƒ½é€šé€šä½¿ç”¨å…¨é™å®šå    </p>
<p> é…ç½®å®Œåæˆ‘ä»¬éœ€è¦äº†è§£å‡ ä¸ªç±»<br>     2 æ‹¿åˆ°SqlSessionFactoryä¹‹å‰éœ€è¦è¯»å–æ ¸å¿ƒçš„xmlé…ç½®æ–‡ä»¶<br>     3 éœ€è¦æ„é€ è€…(SqlSessionFactoryBuilder)æ¥åˆ›å»ºå®ƒ</p>
<p>å’±ä»¬è¯´è¿‡ï¼Œéœ€è¦é€šè¿‡å®ƒå»æ‹¿åˆ°ä¸€ä¸ªSqlSessionå¯¹è±¡(ç›¸å½“äºJDBCçš„è¿æ¥)<br>å¿…éœ€è¦æœ‰SqlSessionè¿™ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬æ‰å¯ä»¥å»æ‰§è¡Œç›¸åº”çš„Sql</p>
<h2 id="è¿™é‡Œä½¿ç”¨ä¸€ä¸ªç®€å•çš„ç±»ä¸æ•°æ®åº“è¡¨æ¥æµ‹è¯•ä¸€ä¸‹"><a href="#è¿™é‡Œä½¿ç”¨ä¸€ä¸ªç®€å•çš„ç±»ä¸æ•°æ®åº“è¡¨æ¥æµ‹è¯•ä¸€ä¸‹" class="headerlink" title="è¿™é‡Œä½¿ç”¨ä¸€ä¸ªç®€å•çš„ç±»ä¸æ•°æ®åº“è¡¨æ¥æµ‹è¯•ä¸€ä¸‹"></a>è¿™é‡Œä½¿ç”¨ä¸€ä¸ªç®€å•çš„ç±»ä¸æ•°æ®åº“è¡¨æ¥æµ‹è¯•ä¸€ä¸‹</h2><p> <img src="https://img-blog.csdnimg.cn/20190801211818911.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2pjZXRwb29y,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°">çœç•¥getsetæ–¹æ³•ä¸tostring<br> è¡¨<br> <img src="https://img-blog.csdnimg.cn/20190801211925878.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2pjZXRwb29y,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--å‘½åç©ºé—´--&gt;</span><br><span class="line">&lt;mapper namespace=&quot;cn.itsource.dao.Productmaper&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--æŸ¥æ‰¾æ‰€æœ‰--&gt;</span><br><span class="line">    &lt;select id=&quot;findAll&quot; resultType=&quot;Product&quot;&gt;</span><br><span class="line">            select * from product</span><br><span class="line">    &lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p> å†™ä¸€ä¸ªå·¥å…·ç±»</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">public class MyBatisUtil &#123;</span><br><span class="line">    private static SqlSessionFactory factory;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * é™æ€ä»£ç å—åŠ è½½å¯¹è±¡</span><br><span class="line">     */</span><br><span class="line">    static &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            //è¯»å–é…ç½®æ–‡ä»¶</span><br><span class="line">            Reader resourceAsReader = Resources.getResourceAsReader(&quot;mybatis-config.xml&quot;);</span><br><span class="line">            //åˆ›å»ºå·¥å‚</span><br><span class="line">            factory = new SqlSessionFactoryBuilder().build(resourceAsReader);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.err.println(e.getMessage()+&quot;é…ç½®æ–‡ä»¶å¯èƒ½å‡ºé”™&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * è·å–sqlSessionå¯¹è±¡</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static SqlSession getSqlSessionInstance()&#123;</span><br><span class="line">        return factory.openSession();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> æµ‹è¯•ç±»<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">    public void testutil2() throws Exception &#123;</span><br><span class="line">        SqlSession sqlSessionInstance = MyBatisUtil.getSqlSessionInstance();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        List&lt;Product&gt; list =  sqlSessionInstance</span><br><span class="line">        		.selectList(&quot;cn.itsource.dao.Productmaper.findAll&quot;);</span><br><span class="line">        System.out.println(list);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p> æµ‹è¯•æ— è¯¯<br> <img src="https://img-blog.csdnimg.cn/20190801212419633.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2pjZXRwb29y,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°">`æ¥ä¸‹æ¥å†™daoå±‚crud</p>
<p> æ¥å£<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"> package cn.itsource.dao;</span><br><span class="line"></span><br><span class="line">import cn.itsource.domain.Product;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Product  CRUD</span><br><span class="line"> */</span><br><span class="line">public interface IProductDao &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    void delete(Long id);</span><br><span class="line"></span><br><span class="line">    void update(Product product);</span><br><span class="line"></span><br><span class="line">    void add(Product product);</span><br><span class="line"></span><br><span class="line">    List&lt;Product&gt; findall();</span><br><span class="line"></span><br><span class="line">    Product findOne(Long id);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">`</span><br></pre></td></tr></table></figure></p>
<p> å®ç°ç±»<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"> package cn.itsource.dao.impl;</span><br><span class="line"></span><br><span class="line">import cn.itsource.dao.IProductDao;</span><br><span class="line">import cn.itsource.domain.Product;</span><br><span class="line">import cn.itsource.utils.MyBatisUtil;</span><br><span class="line">import org.apache.ibatis.session.SqlSession;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * CRUD  </span><br><span class="line"> */</span><br><span class="line">public class ProductDaoImpl implements IProductDao &#123;</span><br><span class="line">    public static final String NAMESPACE = &quot;cn.itsource.dao.Productmaper.&quot;;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void delete(Long id) &#123;</span><br><span class="line">        SqlSession session = MyBatisUtil.getSqlSessionInstance();</span><br><span class="line">        try &#123;</span><br><span class="line">            session.delete(NAMESPACE + &quot;delete&quot;, id);</span><br><span class="line">            session.commit();</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            session.rollback();</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            session.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void update(Product product) &#123;</span><br><span class="line">        SqlSession session = MyBatisUtil.getSqlSessionInstance();</span><br><span class="line">        try &#123;</span><br><span class="line">            session.update(NAMESPACE + &quot;update&quot;, product);</span><br><span class="line">            session.commit();</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            session.rollback();</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            session.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void add(Product product) &#123;</span><br><span class="line">        SqlSession session = MyBatisUtil.getSqlSessionInstance();</span><br><span class="line">        try &#123;</span><br><span class="line">            session.insert(&quot;cn.itsource.dao.Productmaper.add&quot;, product);</span><br><span class="line">            session.commit();</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            session.rollback();</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;finally &#123;</span><br><span class="line">            session.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public List&lt;Product&gt; findall() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            return MyBatisUtil.getSqlSessionInstance().selectList(&quot;cn.itsource.dao.Productmaper.findAll&quot;);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Product findOne(Long id) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            return MyBatisUtil.getSqlSessionInstance().selectOne(&quot;cn.itsource.dao.Productmaper.findOne&quot;, id);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨é…ç½®æ–‡ä»¶ä¸­å†™sql</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><br><span class="line">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!--å‘½åç©ºé—´--&gt;</span><br><span class="line">&lt;mapper namespace=&quot;cn.itsource.dao.Productmaper&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--æŸ¥æ‰¾ä¸€ä¸ª--&gt;</span><br><span class="line">    &lt;select id=&quot;findOne&quot; parameterType=&quot;long&quot; resultType=&quot;cn.itsource.domain.Product&quot;&gt;</span><br><span class="line">            select * from product where id = #&#123;id&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;!-- æŸ¥è¯¢æ‰€æœ‰ çš„sql  --&gt;</span><br><span class="line">    &lt;select id=&quot;findAll&quot; resultType=&quot;Product&quot;&gt;</span><br><span class="line">            select * from product</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;!-- æ·»åŠ sql  --&gt;</span><br><span class="line">    &lt;!--useGeneratedKeys=&quot;true&quot; keyColumn=&quot;id&quot; keyProperty=&quot;id&quot; æ·»åŠ åè·å–ä¸»é”® --&gt;</span><br><span class="line">    &lt;insert id=&quot;add&quot; parameterType=&quot;cn.itsource.domain.Product&quot; useGeneratedKeys=&quot;true&quot; keyColumn=&quot;id&quot; keyProperty=&quot;id&quot;&gt;</span><br><span class="line">        INSERT INTO product</span><br><span class="line">        (productName,dir_id,salePrice,supplier,brand,cutoff,costPrice)</span><br><span class="line">        values</span><br><span class="line">        (#&#123;productName&#125;,#&#123;dir_id&#125;,#&#123;salePrice&#125;,#&#123;supplier&#125;,#&#123;brand&#125;,#&#123;cutoff&#125;,#&#123;costPrice&#125;)</span><br><span class="line">    &lt;/insert&gt;</span><br><span class="line">&lt;!-- åˆ é™¤sql  --&gt;</span><br><span class="line">    &lt;delete id=&quot;delete&quot; parameterType=&quot;long&quot;&gt;</span><br><span class="line">        delete from product where id = #&#123;id&#125;</span><br><span class="line">    &lt;/delete&gt;</span><br><span class="line">&lt;!-- æ›´æ–°sql  --&gt;</span><br><span class="line">    &lt;update id=&quot;update&quot; parameterType=&quot;cn.itsource.domain.Product&quot;&gt;</span><br><span class="line">        update product</span><br><span class="line">          set productName = #&#123;productName&#125;,</span><br><span class="line">             dir_id = #&#123;dir_id&#125;,</span><br><span class="line">             salePrice = #&#123;salePrice&#125;,</span><br><span class="line">             supplier = #&#123;supplier&#125;,</span><br><span class="line">             brand = #&#123;brand&#125;,</span><br><span class="line">             cutoff = #&#123;cutoff&#125;,</span><br><span class="line">             costPrice = #&#123;costPrice&#125;</span><br><span class="line">        where id = #&#123;id&#125;</span><br><span class="line">    &lt;/update&gt;</span><br><span class="line"></span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"> æµ‹è¯•ç±»</span><br><span class="line">package cn.itsource.Test;</span><br><span class="line"></span><br><span class="line">import cn.itsource.dao.IProductDao;</span><br><span class="line">import cn.itsource.dao.impl.ProductDaoImpl;</span><br><span class="line">import cn.itsource.domain.Product;</span><br><span class="line">import cn.itsource.utils.MyBatisUtil;</span><br><span class="line">import org.apache.ibatis.io.Resources;</span><br><span class="line">import org.apache.ibatis.session.SqlSession;</span><br><span class="line">import org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line">import org.junit.Test;</span><br><span class="line"></span><br><span class="line">import java.io.Reader;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public class MybatisimplTest &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void test() throws Exception &#123;</span><br><span class="line">        IProductDao productDao = new ProductDaoImpl();</span><br><span class="line">        List&lt;Product&gt; findall = productDao.findall();</span><br><span class="line">        findall.forEach( v -&gt; System.out.println(v));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testfindone() throws Exception &#123;</span><br><span class="line">        IProductDao productDao = new ProductDaoImpl();</span><br><span class="line">        Product one = productDao.findOne(1L);</span><br><span class="line">        System.out.println(one);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    @Test</span><br><span class="line">    public void testadd() throws Exception &#123;</span><br><span class="line">        IProductDao productDao = new ProductDaoImpl();</span><br><span class="line">        Product one1 = productDao.findOne(2L);</span><br><span class="line">        one1.setId(null);</span><br><span class="line">        productDao.add(one1);</span><br><span class="line">        System.out.println(one1);</span><br><span class="line">    &#125;</span><br><span class="line">    @Test</span><br><span class="line">    public void testupdate() throws Exception &#123;</span><br><span class="line">        IProductDao productDao = new ProductDaoImpl();</span><br><span class="line">        Product one1 = productDao.findOne(1L);</span><br><span class="line">        one1.setProductName(&quot;å¼ æ‰¬&quot;);</span><br><span class="line">        productDao.update(one1);</span><br><span class="line">    &#125;</span><br><span class="line">    @Test</span><br><span class="line">    public void testdelete() throws Exception &#123;</span><br><span class="line">        IProductDao productDao = new ProductDaoImpl();</span><br><span class="line">        productDao.delete(1L);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>crudæ³¨æ„äº‹é¡¹</p>
<p>ä¸‹é¢çš„ç‚¹éƒ½å¾ˆé‡è¦ï¼Œæ˜¯å¤§å®¶åœ¨ä½¿ç”¨MyBatisçš„æ—¶å€™ç»å¸¸å‡ºç°çš„ç‚¹ã€‚å¸Œæœ›å¤§å®¶å¼•èµ·é‡è§†ã€‚å‡ºç°é—®é¢˜çš„æ—¶å€™å¿ƒæ€æ”¾å¹³,ä¸è¦ç‹‚èº,æ…¢æ…¢çš„æ‰¾ã€‚åŸºæœ¬å’±ä»¬ä½¿ç”¨MyBatisä¸­å‡ºçš„é”™éƒ½åœ¨è¿™é‡Œã€‚<br>ä½¿ç”¨æ¡†æ¶çš„æ—¶å€™é…ç½®ä¿¡æ¯å˜å¤šï¼Œåœ¨é…ç½®é‡Œå†™çš„éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œä¸”ç»å¸¸æ˜¯è¦å¯¹åº”çš„ã€‚å› ä¸ºï¼Œè¿™é‡Œå¸Œæœ›å¤§å®¶è¦åˆ‡è®°ï¼šå†™çš„æ—¶å€™ç»†å¿ƒï¼Œå‡ºç°é”™è¯¯æ‰¾å­—ç¬¦ä¸²è¦è€å¿ƒï¼Œ<br>    1 ä¸»é…ç½®ä¸­æœªé…ç½®ç›¸åº”çš„mapper(å½“ç„¶ï¼Œè¿™ä¸ªè·¯å¾„ä¹Ÿå¯èƒ½å†™é”™)<br>    2 åœ¨ä»£ç ä¸­è°ƒç”¨Sqlçš„æ—¶å€™è·¯å¾„å†™é”™<br>    3  Sqlå†™é”™,è¿™ä¸ªåº”è¯¥è¿˜å¥½æ‰¾<br>    4 å½“æˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­å¾ˆå¤šåœ°æ–¹å¦‚æœå†™é”™ï¼Œå³ä¾¿æ˜¯ä½ è¿˜æ²¡æœ‰ä½¿ç”¨ä¹Ÿå¯èƒ½ä¼šæŠ¥é”™<br>    5 å†™Sqlçš„æ ‡ç­¾ä¸éœ€è¦å…¨éƒ¨ä¸€è‡´(å¦‚æ·»åŠ ä¸ä¸€å®šå¿…éœ€ä½¿ç”¨insert),ä½†æ˜¯å®ƒçš„å±æ€§ä¼šä¸åŒ<br>    6 åœ¨ä¼ å…¥ä¸è¿”å›å‚æ•°æ—¶å…¨é™å®šç±»åå†™é”™<br>    åœ¨å¼€å‘çš„æ—¶å€™ï¼Œè¦è¾¹åšè¾¹æµ‹è¯•ã€‚ åœ¨æŸä¸€æ­¥å‡ºç°é”™è¯¯åï¼Œåˆ é™¤æ–°åŠ çš„ä»£ç çœ‹æœ‰æ²¡æœ‰é—®é¢˜ï¼Œå¦‚æœåˆ é™¤éƒ¨åˆ†ä»£ç åè¿è¡ŒæˆåŠŸï¼Œå°±ç›¸åº”çš„å¯ä»¥ç¼©å°æ’é”™çš„èŒƒå›´ã€‚</p>
<h4 id="SqlSessionFactoryBuilder"><a href="#SqlSessionFactoryBuilder" class="headerlink" title="SqlSessionFactoryBuilder"></a>SqlSessionFactoryBuilder</h4><p>å»ºé€ è€…æ¨¡å¼:æˆ‘ä»¬æœ€åæ‹¿åˆ°çš„è¿™ä¸ªå¯¹è±¡æ˜¯éå¸¸å¤æ‚çš„. ç”¨è¿™ä¸ªå»ºé€ è€…å°±å®ƒå…ˆä¸ºæˆ‘ä»¬æŠŠè¿™äº›å¤æ‚çš„ä»£ç å®Œæˆ.<br>è¿™ä¸ªç±»å¯ä»¥è¢«å®ä¾‹åŒ–ï¼Œä½¿ç”¨å’Œä¸¢å¼ƒã€‚ä¸€æ—¦ä½ åˆ›å»ºäº†SqlSessionFactoryåï¼Œè¿™ä¸ªSqlSessionFactoryBuilderç±»å°±ä¸éœ€è¦å­˜åœ¨äº†ã€‚å› æ­¤SqlSessionFactoryBuilderå®ä¾‹çš„æœ€ä½³èŒƒå›´æ˜¯æ–¹æ³•èŒƒå›´ï¼ˆä¹Ÿå°±æ˜¯æœ¬åœ°æ–¹æ³•å˜é‡ï¼‰ã€‚<br>ä½ å¯ä»¥é‡ç”¨SqlSessionFactoryBuilderæ¥åˆ›å»ºå¤šä¸ªSqlSessionFactoryå®ä¾‹ï¼Œä½†æ˜¯æœ€å¥½çš„æ–¹å¼æ˜¯<br>ä¸éœ€è¦ä¿æŒå®ƒä¸€ç›´å­˜åœ¨æ¥ä¿è¯æ‰€æœ‰XMLè§£æèµ„æºï¼Œå› ä¸ºè¿˜æœ‰æ›´é‡è¦çš„äº‹æƒ…è¦åšã€‚<br> <strong>æ€»ç»“æ¥è¯´å°±æ˜¯ç”¨å®Œå¯ä»¥éšæ„ä¸¢å¼ƒä¸”åªç”¨ä¸€æ¬¡,</strong></p>
<h4 id="SqlSessionFactory-ç±»ä¼¼äºjpaçš„EntityMangerFactory"><a href="#SqlSessionFactory-ç±»ä¼¼äºjpaçš„EntityMangerFactory" class="headerlink" title="SqlSessionFactory(ç±»ä¼¼äºjpaçš„EntityMangerFactory)"></a>SqlSessionFactory(ç±»ä¼¼äºjpaçš„EntityMangerFactory)</h4><p> ä¸€æ—¦è¢«åˆ›å»ºï¼ŒSqlSessionFactoryåº”è¯¥åœ¨ä½ çš„åº”ç”¨æ‰§è¡ŒæœŸé—´éƒ½å­˜åœ¨ã€‚æ²¡æœ‰ç†ç”±æ¥å¤„ç†æˆ–é‡æ–°åˆ›å»ºå®ƒã€‚ä½¿ç”¨SqlSessionFactoryçš„æœ€ä½³å®è·µæ˜¯åœ¨åº”ç”¨è¿è¡ŒæœŸé—´ä¸è¦é‡å¤åˆ›å»ºå¤šæ¬¡<br>** æ˜¯ä¸€ä¸ªé‡é‡çº§å¯¹è±¡   , æˆ‘ä»¬ä½¿ç”¨é™æ€ä»£ç å—å•ä¾‹æ¨¡å¼**</p>
<h4 id="SqlSession"><a href="#SqlSession" class="headerlink" title="SqlSession"></a>SqlSession</h4><p>æ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒè‡ªå·±çš„SqlSessionå®ä¾‹ã€‚SqlSessionçš„å®ä¾‹ä¸èƒ½è¢«å…±äº«ï¼Œä¹Ÿæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚å› æ­¤æœ€ä½³çš„èŒƒå›´æ˜¯è¯·æ±‚æˆ–æ–¹æ³•èŒƒå›´ã€‚<br><strong>ç»å¯¹ä¸èƒ½å°†SqlSessionå®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä¸€ä¸ªç±»çš„é™æ€å­—æ®µç”šè‡³æ˜¯å®ä¾‹å­—æ®µä¸­ã€‚<br>ä¹Ÿç»ä¸èƒ½å°†SqlSessionå®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä»»ä½•ç±»å‹çš„ç®¡ç†èŒƒå›´ä¸­ï¼Œæ¯”å¦‚Serlvetæ¶æ„ä¸­çš„HttpSessionã€‚</strong></p>
<p>å¦‚æœä½ ç°åœ¨æ­£ç”¨ä»»æ„çš„Webæ¡†æ¶ï¼Œè¦è€ƒè™‘SqlSessionæ”¾åœ¨ä¸€ä¸ªå’ŒHTTPè¯·æ±‚å¯¹è±¡ç›¸ä¼¼çš„èŒƒå›´å†…ã€‚æ¢å¥è¯è¯´ï¼ŒåŸºäºæ”¶åˆ°çš„HTTPè¯·æ±‚ï¼Œä½ å¯ä»¥æ‰“å¼€äº†ä¸€ä¸ªSqlSessionï¼Œç„¶åè¿”å›å“åº”ï¼Œå°±å¯ä»¥å…³é—­å®ƒäº†ã€‚å…³é—­Sessionå¾ˆé‡è¦ï¼Œ </p>
<h3 id="åˆ—åä¸å±æ€§åä¸å¯¹åº”çš„è§£å†³æ–¹æ¡ˆ-resultMap"><a href="#åˆ—åä¸å±æ€§åä¸å¯¹åº”çš„è§£å†³æ–¹æ¡ˆ-resultMap" class="headerlink" title="åˆ—åä¸å±æ€§åä¸å¯¹åº”çš„è§£å†³æ–¹æ¡ˆ  resultMap"></a>åˆ—åä¸å±æ€§åä¸å¯¹åº”çš„è§£å†³æ–¹æ¡ˆ  resultMap</h3><p>å¤§å®¶åº”è¯¥æœ‰æ³¨æ„åˆ°ï¼Œå‰é¢å’±ä»¬åšæ˜ å°„æ–‡ä»¶çš„æ—¶å€™ï¼Œåªåšäº†è¡¨ä¸å¯¹è±¡ä¹‹é—´çš„è”ç³»ã€‚å¹¶æ²¡æœ‰åšåˆ—ä¸å­—æ®µä¹‹é—´çš„è”ç³»ã€‚é‚£ä¹ˆå®ƒä»¬ä¹‹é—´æ˜¯æ€ä¹ˆè”ç³»ä¸Šçš„å‘¢ï¼Ÿ<br>ç”±äºä¹‹å‰å’±ä»¬çš„åˆ—åä¸å±æ€§åæ˜¯ä¸€æ ·çš„ï¼Œå› æ­¤æ¡†æ¶è¿›è¡Œäº†è‡ªåŠ¨çš„è¯†åˆ«ã€‚<br>é‚£ä¹ˆï¼šå¦‚æœå’±ä»¬çš„åˆ—åä¸å±æ€§åä¸ä¸€è‡´äº†(å¯¹åº”ä¸ä¸Š)ï¼Œè¿™æ—¶å€™åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ<br>è¿™æ—¶å€™ï¼Œå°±éœ€è¦æˆ‘ä»¬å¼€å‘äººå‘˜å‘Šè¯‰MyBatisï¼Œæˆ‘ä»¬éœ€è¦æŠŠå“ªäº›åˆ—åä¸å±æ€§åå¯¹åº”ä¸Šã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20190801213637960.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/19/mybatisOne/" data-id="ck0ulbmdc000694v6s5n15kee" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-éƒ¨åˆ†çš„çŸ¥è¯†" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/02/éƒ¨åˆ†çš„çŸ¥è¯†/" class="article-date">
  <time datetime="2017-07-02T12:53:52.000Z" itemprop="datePublished">2017-07-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/02/éƒ¨åˆ†çš„çŸ¥è¯†/">å…³äºæ³¨è§£éƒ¨åˆ†çš„çŸ¥è¯†</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æ‰€æœ‰å…³äºæ³¨è§£çš„æ–‡ç« éƒ½ç»•ä¸å¼€è¿™å››ä¸ªæ³¨è§£,æˆ‘ä»¬ä¹Ÿä¸ä¾‹å¤–<br>@Target<br>@Retention<br>@Documented<br>@Inherited<br>æ¥ä¸‹æ¥å°±ä¸€ä¸ªä¸ªçš„ä»‹ç»<br>é¦–å…ˆæ˜¯ <strong>@Target</strong><br>è¿™ä¸ªæ³¨è§£ç”¨æ¥æ ‡å¿—å½“å‰å®šä¹‰çš„æ³¨è§£æ˜¯æ‰“åœ¨å“ªä¸ªä½ç½®çš„,æ¯”å¦‚ç±»ä¸Š,æ–¹æ³•ä¸Š,å­—æ®µä¸Š,å¯ä»¥å†™å¤šä¸ª<br>é€šè¿‡æºç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å†…éƒ¨æ˜¯ä¸€ä¸ªæ•°ç»„,æ‰€æœ‰å¯ä»¥å†™å¤šä¸ª</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@Documented</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Target(ElementType.ANNOTATION_TYPE)</span><br><span class="line">public @interface Target &#123;</span><br><span class="line">    /**</span><br><span class="line">     * Returns an array of the kinds of elements an annotation type</span><br><span class="line">     * can be applied to.</span><br><span class="line">     * @return an array of the kinds of elements an annotation type</span><br><span class="line">     * can be applied to</span><br><span class="line">     *æ•°ç»„è¡¨ç¤ºæ­¤å±æ€§å¯ä»¥å†™å¤šä¸ªå€¼</span><br><span class="line">     */</span><br><span class="line">    ElementType[] value();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®ƒå¯ä»¥ä½¿ç”¨çš„å€¼æœ‰ä»¥ä¸‹è¿™äº›<br><img src="https://img-blog.csdnimg.cn/20190913031812404.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2pjZXRwb29y,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ElementTypeæ˜¯ä¸€ä¸ªæšä¸¾ç±»å†…éƒ¨å°±æ˜¯ä¸Šé¢åˆ—ä¸¾å‡ºçš„å‡ ä¸ªå±æ€§å½“ç„¶,ä¹Ÿå¯ä»¥ä¸ç”¨è¿™ä¸ªæšä¸¾,ç›´æ¥å†™å­—ç¬¦ä¸²æ•ˆæœæ˜¯ä¸€æ ·çš„<br>é‚£ä¹ˆä»–ä»¬åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆå‘¢<br>TYPE:ç±»ã€æ¥å£(åŒ…æ‹¬æ³¨è§£ç±»å‹) æˆ–enumå£°æ˜ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€ã€€ã€€FIELD:å­—æ®µå£°æ˜(åŒ…æ‹¬enumå¸¸é‡).,ä¹Ÿå°±æ˜¯æ‰“åœ¨å­—æ®µä¸Š</span><br><span class="line"></span><br><span class="line">ã€€ã€€ã€€ã€€METHOD:æ–¹æ³•å£°æ˜ã€‚</span><br><span class="line"></span><br><span class="line">ã€€ã€€ã€€ã€€PARAMTER:å½¢å¼å‚æ•°å£°æ˜ã€‚,æ–¹æ³•çš„å½¢å‚ä¸Š</span><br><span class="line"></span><br><span class="line">ã€€ã€€ã€€ã€€CONSTRUCTOR:æ„é€ å‡½æ•°å£°æ˜ã€‚constructortä¸Š</span><br><span class="line"></span><br><span class="line">ã€€ã€€ã€€ã€€LOCAL_VARIABLEï¼šå±€éƒ¨å˜é‡å£°æ˜ã€‚æ–¹æ³•å†…å˜é‡</span><br><span class="line"></span><br><span class="line">ã€€ã€€ã€€ã€€ANNOTATION_TYPEï¼šæ³¨è§£ç±»å‹å£°æ˜ã€‚æ‰“åœ¨æ³¨è§£ä¸Š</span><br><span class="line"></span><br><span class="line">ã€€ã€€ã€€ã€€PACKAGEï¼šåŒ…å£°æ˜</span><br><span class="line"></span><br><span class="line">ã€€ã€€ã€€ã€€TYPE_PARAMETERï¼šå‚æ•°ç±»å‹å£°æ˜</span><br><span class="line"></span><br><span class="line">ã€€ã€€ã€€ã€€TYPE_USE:ä½¿ç”¨ä¸€ä¸ªç±»å‹ï¼Œè¯¦è§ï¼šjava.lang.annotation.ElementType</span><br></pre></td></tr></table></figure>

<p><strong>@Retention æ³¨è§£</strong><br>æŒ‡çš„æ˜¯æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸ<br>å³ä¼šä¿ç•™åˆ°å“ªä¸ªé˜¶æ®µã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SOURCEï¼šæºç çº§åˆ«ä¿ç•™ï¼Œç¼–è¯‘åå³ä¸¢å¼ƒã€‚</span><br><span class="line">CLASS:ç¼–è¯‘çº§åˆ«ä¿ç•™ï¼Œç¼–è¯‘åçš„classæ–‡ä»¶ä¸­å­˜åœ¨ï¼Œåœ¨jvmè¿è¡Œæ—¶ä¸¢å¼ƒï¼Œè¿™æ˜¯é»˜è®¤å€¼ã€‚</span><br><span class="line">RUNTIMEï¼š è¿è¡Œçº§åˆ«ä¿ç•™ï¼Œç¼–è¯‘åçš„classæ–‡ä»¶ä¸­å­˜åœ¨ï¼Œåœ¨jvmè¿è¡Œæ—¶ä¿ç•™ï¼Œå¯ä»¥è¢«åå°„è°ƒç”¨ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>@Documented æ³¨è§£</strong><br>èƒ½è¢«javadocæ­¤ç±»çš„å·¥å…·æ–‡æ¡£åŒ–   æ— å€¼<br><strong>@Inheritedæ³¨è§£</strong><br>å½“ä½ æƒ³è®©ä½ çš„è‡ªå®šä¹‰æ³¨è§£è¢«ç»§æ‰¿æ—¶,å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ³¨è§£,ä¹Ÿæ²¡æœ‰å‚æ•°å–å€¼</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/07/02/éƒ¨åˆ†çš„çŸ¥è¯†/" data-id="ck0ulbmb2000394v6clmqh9eq" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="page-oop" class="article article-type-page" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/21/oop/" class="article-date">
  <time datetime="2017-04-21T12:40:43.000Z" itemprop="datePublished">2017-04-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/21/oop/">JAVAé¢å‘å¯¹è±¡</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="JAVAé¢å‘å¯¹è±¡çš„æ€ç»´"><a href="#JAVAé¢å‘å¯¹è±¡çš„æ€ç»´" class="headerlink" title="JAVAé¢å‘å¯¹è±¡çš„æ€ç»´"></a>JAVAé¢å‘å¯¹è±¡çš„æ€ç»´</h2><pre><code>é¢å‘å¯¹è±¡ä¸‰å¤§åŸºæœ¬ç‰¹å¾ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€ã€‚è€Œé¢å‘å¯¹è±¡çš„è¿‡ç¨‹å°±æ˜¯å›´ç»•å¯¹è±¡è¿›è¡Œå·¥ä½œçš„è¿‡ç¨‹ã€‚

ç±»æ˜¯ä¸€ç§æ•°æ®ç±»å‹
å¯¹è±¡åˆ™æ˜¯è¿™ç§ç±»å‹çš„ä¸€ä¸ªå…·ä½“å®ä¾‹</code></pre><p>å¯¹è±¡åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼ŒåŠ¨æ€éƒ¨åˆ†ã€è¡Œä¸ºã€‘ä¸é™æ€éƒ¨åˆ†[æè¿°]ã€‚</p>
<p>â‘ é™æ€éƒ¨åˆ†ï¼šé¡¾åæ€ä¹‰å°±æ˜¯ä¸èƒ½åŠ¨çš„éƒ¨åˆ†ï¼Œè¿™ä¸ªéƒ¨åˆ†è¢«ç§°ä¸ºâ€œå±æ€§â€ï¼Œä»»ä½•å¯¹è±¡éƒ½ä¼šå…·å¤‡å…¶è‡ªèº«å±æ€§ï¼Œå¦‚ä¸€ä¸ªäººï¼Œå®ƒåŒ…æ‹¬é«˜çŸ®ã€èƒ–ç˜¦ã€æ€§åˆ«ã€å¹´é¾„ç­‰å±æ€§ã€‚<br>â‘¡åŠ¨æ€éƒ¨åˆ†ï¼šå…·æœ‰è¿™äº›å±æ€§çš„äººä¼šæ‰§è¡Œå“ªäº›åŠ¨ä½œè¿™ä¸ªäººå¯ä»¥å“­æ³£ã€å¾®ç¬‘ã€è¯´è¯ã€è¡Œèµ°ï¼Œè¿™äº›æ˜¯è¿™ä¸ªäººå…·å¤‡çš„è¡Œä¸ºï¼ˆåŠ¨æ€éƒ¨åˆ†ï¼‰ï¼Œ<br>.Javaè¯­è¨€çš„è®¾è®¡æ€æƒ³ï¼šå¸Œæœ›å°†ç°å®ç”Ÿæ´»ä¸­çš„ï¼Œå¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„å…³ç³»åœ¨è®¡ç®—æœºç³»ç»Ÿå¾—ä»¥ä½“ç°ï¼Œä»è€Œæ„å»ºè®¡ç®—æœºç³»ç»Ÿ<br>        å¯¹äºäº‹ç‰©çš„æ€è€ƒï¼šéœ€è¦ç±»ï¼Œéœ€è¦å¯¹è±¡ã€ä¸‡äº‹ä¸‡ç‰©çš†å¯¹è±¡   ä¸‡äº‹ä¸‡ç‰©çš†å¯åˆ†ç±»ã€‘<br>          ç±»ï¼šå¯¹äºç±»æ€è€ƒï¼šä¸‡äº‹ä¸‡ç‰©ç®€å•æ€è€ƒï¼š<br>          ç±»ï¼šå…·å¤‡ä¸¤å¤§ç‰¹æ€§ã€å±æ€§ã€‘<br>              1.é™æ€å±æ€§ï¼šä¿¡æ¯æè¿°ï¼Œå­¦ç”Ÿï¼Œå§“åï¼Œå¹´é¾„ ï¼Œèº«é«˜<br>              2.åŠ¨æ€è¡Œä¸ºï¼šå¤„ç†æ•°æ®ï¼Œäººæ¥è¯´ï¼šä¼šèµ°ï¼Œä¼šè·‘â€¦â€¦</p>
<p><strong>å°è£…</strong><br>é€šè¿‡ç»™ç±»ä¸­çš„æˆå‘˜ï¼ˆå­—æ®µï¼Œæ–¹æ³•ï¼Œæ„é€ æ–¹æ³•ï¼‰æ·»åŠ è®¿é—®æƒé™æ¥å®ç°è®¿é—®æ§åˆ¶</p>
<p><strong>ç»§æ‰¿</strong><br>(1)æ³›åŒ–å’Œç‰¹åŒ–<br>    <em>â‘ æ³›åï¼šåœ¨å¤šä¸ªå­ç±»çš„åŸºç¡€ä¸Šé¢æŠ½å–å…±æœ‰å±æ€§çš„è¡Œä¸ºåˆ°ä¸€ä¸ªçˆ¶ç±»ä¸­å»<br>    â‘¡ç‰¹åŒ–ï¼šåœ¨ä¸€ä¸ªçˆ¶ç±»çš„åŸºç¡€ä¸Šæ‹“å±•å­ç±»ç‰¹æœ‰çš„å±æ€§å’Œè¡Œä¸ºï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„å­ç±»<br>    â‘¢åŸåˆ™ï¼šçˆ¶ç±»å­˜æ”¾å…±æ€§ï¼Œå­ç±»å­˜æ”¾ç‰¹æ€§</em><br>(2)Javaä¸­ç±»çš„ç»§æ‰¿ç‰¹ç‚¹<br>    <em>â‘ Javaä¸­ç±»çš„ç»§æ‰¿æ˜¯å•ç»§æ‰¿<br>    â‘¡å¯ä»¥æ”¯æŒå¤šé‡ç»§æ‰¿æ¯ä¸€ä¸ªç±»éƒ½//ä¹Ÿå°±æ˜¯é—´æ¥ç»§æ‰¿<br>    â‘¢æœ‰ä¸€ä¸ªç›´æ¥çˆ¶ç±»,å¦‚æœæ²¡æœ‰çœ‹åˆ°æ˜¾ç¤ºçš„ç»§æ‰¿ä»£ç ,é‚£ä¹ˆå°±éšå¼ç»§æ‰¿å°±Object</em><br>(3)ç»§æ‰¿åˆ°çˆ¶ç±»çš„é‚£äº›ä¸œè¥¿<br>    <em>â‘ éç§æœ‰çš„å­—æ®µåŠæ–¹æ³•<br>    â‘¡çˆ¶ç±»ç‰¹æ€§<br>    â‘¢é™æ€æ–¹æ³•ä¸èƒ½è¢«è¦†å†™</em><br>1)å¦‚æœæ˜¯çˆ¶ç±»è£…å­ç±»å¯¹è±¡è°ƒçˆ¶ç±»å’Œå­ç±»éƒ½æœ‰çš„é™æ€æ–¹æ³•ï¼Œä¼šè°ƒç”¨çˆ¶ç±»æ–¹æ³•</p>
<p><strong>å¤šæ€</strong><br>(1)ä¸€ç§äº‹ç‰©çš„å¤šç§å½¢æ€<br>(2)ä½¿ç”¨amlï¼šè£…å…¥å­ç±»å¯¹è±¡å­˜åœ¨å¤šç§å¯èƒ½æ€§ï¼š<br>(3)ç¼–è¯‘æ˜¯çœ‹çš„æ˜¯Animalç±»å‹ã€åªçœ‹ç±»å‹ä¸çœ‹å€¼ã€‘<br>(4)è¿è¡Œæ—¶çœ‹çš„æ˜¯å®é™…å­˜æ”¾çš„å¯¹è±¡ã€çœŸå®ç±»å‹ã€‘<br>(5)å®˜æ–¹æ¦‚å¿µï¼šç¼–è¯‘æ—¶è·Ÿè¿è¡Œæ—¶ç±»å‹ä¸ä¸€è‡´å°±äº§ç”Ÿäº†å¤šæ€<br>(6)æ°‘é—´ç†è§£ï¼šçˆ¶ç±»ç±»å‹çš„å˜é‡ï¼Œå­˜æ”¾å­ç±»ç±»å‹çš„å¯¹è±¡ï¼Œå¯èƒ½å­˜æ”¾å­ç±»ç±»å‹çš„å¯¹è±¡æœ‰å¤šç§å¯èƒ½<br>(7)å¤šæ€å­˜åœ¨çš„å‰æï¼šå¿…é¡»æœ‰ç»§æ‰¿å…³ç³»<br>(8)å¤šæ€åº”ç”¨<br>â‘ æ–¹æ³•å‚æ•°ä¼ é€’ï¼šæ–¹æ³•å½¢å‚çˆ¶ç±»ç±»å‹ï¼Œå…è®¸ä¼ å­ç±»ç±»å‹å¯¹è±¡<br>â‘¡æ–¹æ³•è¿”å›å€¼<br>(9)å¤šæ€çš„å¥½å¤„ï¼š<br>â‘ å±è”½äº†ä¸åŒå­ç±»ä¹‹é—´å®ç°çš„å·®å¼‚<br>(10)åŠ å¼ºé¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³ï¼š<br>â‘ æ­¤å¤„ä½“ç°javaè¯­è¨€è®¾è®¡æ€æƒ³ï¼Œå¸Œæœ›å°†ç°å®ç”Ÿæ´»ä¸­çš„å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„å…³ç³»åœ¨è®¡ç®—æœºç³»ç»Ÿå¾—ä»¥ä½“ç°</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/21/oop/" data-id="ck0ulbmb3000494v6pb8glrs2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JAVAä¸­-ä¸equalsçš„åŒºåˆ«" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/21/JAVAä¸­-ä¸equalsçš„åŒºåˆ«/" class="article-date">
  <time datetime="2017-03-21T12:56:06.000Z" itemprop="datePublished">2017-03-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/21/JAVAä¸­-ä¸equalsçš„åŒºåˆ«/">JAVAä¸­==ä¸equalsçš„åŒºåˆ«</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> == å’Œ equals éƒ½æ˜¯æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰,è¯·é—®å®ƒä»¬åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢?<br>ç›¸ç­‰ :<br>  ä¼ ç»Ÿçš„ç†è§£ä¸€èˆ¬éƒ½æ˜¯æ•°å­—å€¼æ˜¯å¦ç›¸ç­‰;<br>åœ¨ç¨‹åºä¸­ä»»ä½•ä¸œè¥¿éƒ½æ˜¯æ•°æ®,éƒ½ä¼šæ¯”è¾ƒæ˜¯å¦ç›¸ç­‰[ å¯¹è±¡ ]<br> == æ¯”è¾ƒè¿ç®—ç¬¦<br>åŸºæœ¬æ•°æ®ç±»å‹å˜é‡:    æ¯”è¾ƒçš„å°±æ˜¯å€¼æ˜¯å¦ç›¸ç­‰;<br>å¼•ç”¨æ•°æ®ç±»å‹å˜é‡:    æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„åœ°å€æ˜¯å¦ä¸€æ ·;ï¼ˆæ’é™¤ç‰¹æ®Š Stringï¼‰<br> equals æ–¹æ³•[æœ€åˆå®šä¹‰åœ¨æ ¹ç±»Objectä¸­çš„,æ¯”è¾ƒå¯¹è±¡æ˜¯å¦ç›¸ç­‰]<br> åŸºæœ¬æ•°æ®ç±»å‹ :  ä¸èƒ½å¤Ÿä½¿ç”¨!   åŸºæœ¬æ•°æ®ç±»å‹ä¸æ˜¯å¯¹è±¡,ä¸èƒ½å¤Ÿè°ƒç”¨Objectä¸­çš„æ–¹æ³•<br> å¼•ç”¨æ•°æ®ç±»å‹ :  ä½†æ˜¯åœ¨Objectçš„æºç ä¸­å®šä¹‰çš„å°±æ˜¯ == è¿›è¡Œæ¯”è¾ƒæ¯”è¾ƒ<br>å®šä¹‰å¥½çš„ç±»æ²¡æœ‰è¦†å†™è¿‡equalsæ–¹æ³•ï¼Œåˆ™ä¼šç›´æ¥è°ƒç”¨åˆ°äº†Objectä¸­çš„equalsæ–¹æ³•,é‚£ä¹ˆæœ¬è´¨è¿˜æ˜¯åœ¨ä½¿ç”¨==æ¯”è¾ƒ<br>åœ¨å®é™…å¼€å‘ä¸­,è‡ªå®šä¹‰ç±»ï¼šä¸€èˆ¬æ¯”è¾ƒå¯¹è±¡ï¼Œéƒ½æ˜¯é€šè¿‡å¯¹è±¡çš„å±æ€§å€¼è¿›è¡Œæ¯”è¾ƒ,æ‰€ä»¥è‡ªå®šä¹‰ç±»ï¼Œä¼šç»å¸¸è¦†å†™Objectä¸­çš„æ­¤æ–¹æ³•,æŠŠè‡ªå·±çš„æ¯”è¾ƒè§„åˆ™å†™åœ¨æ–¹æ³•é‡Œé¢;<br>â‘«è¦†å†™equalsæ–¹æ³•çš„æ„ä¹‰ï¼šå®šä¹‰ç±»ï¼Œè¦†å†™equalsæ–¹æ³•ï¼Œè‡ªå·±åˆ¶å®šè§„åˆ™ï¼Œæ¯”è¾ƒè‡ªå®šä¹‰ç±»å¯¹è±¡çš„é™æ€å±æ€§<br>(5)æ‰“å°è¿‡ç¨‹å®é™…ä¸Šè°ƒç”¨äº†toStringæ–¹æ³•</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/21/JAVAä¸­-ä¸equalsçš„åŒºåˆ«/" data-id="ck0ulbmav000194v68uz7kje6" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">ä¹æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">äº”æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">å…­æœˆ 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">ä¸ƒæœˆ 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">å››æœˆ 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">ä¸‰æœˆ 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/09/18/cloudä¸dubboçš„åŒºåˆ«è¯¦è§£/">Springcloudä¸dubboçš„åŒºåˆ«è¯¦è§£</a>
          </li>
        
          <li>
            <a href="/2019/05/10/mybatis/">mybatisä¸­çš„$ä¸#</a>
          </li>
        
          <li>
            <a href="/2018/06/28/mybatisTwo/">mybatis çš„ååˆ†è¯¦ç»†çš„å…¥é—¨æ•™ç¨‹ç¬¬äºŒå¼¹</a>
          </li>
        
          <li>
            <a href="/2018/06/19/mybatisOne/">mybatis çš„ååˆ†è¯¦ç»†çš„å…¥é—¨æ•™ç¨‹</a>
          </li>
        
          <li>
            <a href="/2017/07/02/éƒ¨åˆ†çš„çŸ¥è¯†/">å…³äºæ³¨è§£éƒ¨åˆ†çš„çŸ¥è¯†</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 an9527<br>

    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>